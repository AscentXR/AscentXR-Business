<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Ascent XR Dashboard v17</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jaames/iro@5"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="agent_coordination_styles.css">
    <style>
        :root {
            --primary: #0a1d45;
            --primary-dark: #071732;
            --secondary: #132e5e;
            --success: #ff6b00;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #06b6d4;
            --dark-bg: #0f172a;
            --dark-card: #1e293b;
            --dark-border: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --gradient-primary: linear-gradient(135deg, #071732 0%, #0a1d45 100%);
            --gradient-success: linear-gradient(135deg, #ff6b00 0%, #0d9488 100%);
            --gradient-warning: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-primary);
        }
        
        .dashboard {
            max-width: 1800px;
            margin: 0 auto;
            background: var(--dark-bg);
            border-radius: 24px;
            box-shadow: 0 25px 75px rgba(0,0,0,0.5);
            overflow: hidden;
            border: 1px solid var(--dark-border);
        }
        
        /* HEADER */
        .header {
            background: var(--gradient-primary);
            color: white;
            padding: 30px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--dark-border);
        }
        
        .header-content h1 {
            font-size: 2.5rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .header-content .subtitle {
            opacity: 0.9;
            font-size: 1.1rem;
            color: rgba(255,255,255,0.9);
        }
        
        .header-stats {
            display: flex;
            gap: 20px;
        }
        
        .header-stat {
            text-align: center;
            padding: 12px 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        .header-stat-value {
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        .header-stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        /* MAIN GRID - 3 COLUMN LAYOUT */
        .main-grid {
            display: grid;
            grid-template-columns: 300px 1fr 400px;
            gap: 0;
            min-height: calc(100vh - 180px);
        }
        
        /* LEFT SIDEBAR - NAVIGATION */
        .sidebar-left {
            padding: 25px;
            background: var(--dark-card);
            border-right: 1px solid var(--dark-border);
        }
        
        .nav-section {
            margin-bottom: 30px;
        }
        
        .nav-title {
            font-size: 1rem;
            color: var(--text-primary);
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }
        
        .nav-menu {
            list-style: none;
        }
        
        .nav-item {
            margin-bottom: 10px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: var(--dark-bg);
            border-radius: 10px;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }
        
        .nav-link:hover, .nav-link.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .nav-link i {
            width: 20px;
            text-align: center;
        }
        
        /* CENTER CONTENT AREA */
        .content-area {
            padding: 30px;
            overflow-y: auto;
            max-height: calc(100vh - 180px);
        }
        
        /* RIGHT SIDEBAR - QUICK ACTIONS & INFO */
        .sidebar-right {
            padding: 25px;
            background: var(--dark-card);
            border-left: 1px solid var(--dark-border);
        }
        
        /* SECTION STYLES */
        .section {
            margin-bottom: 40px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--dark-border);
        }
        
        .section-title {
            font-size: 1.5rem;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }
        
        .section-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            background: var(--primary);
            color: white;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease;
        }
        
        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: var(--dark-border);
        }
        
        .btn-secondary:hover {
            background: var(--text-muted);
        }
        
        .btn-success {
            background: var(--success);
        }
        
        .btn-warning {
            background: var(--warning);
        }
        
        /* DOCUMENT VIEWER */
        .document-viewer {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid var(--dark-border);
            height: calc(100vh - 200px);
            display: flex;
            flex-direction: column;
        }
        
        .document-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--dark-border);
        }
        
        .document-content {
            flex: 1;
            overflow: hidden;
        }
        
        /* DOCUMENTATION CARDS */
        .docs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        /* INTEGRATION CARDS */
        .integrations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .integration-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 16px;
            border: 1px solid var(--dark-border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .integration-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .integration-card.linkedin {
            border-left: 4px solid #0077b5;
        }
        
        .integration-card.crm {
            border-left: 4px solid var(--warning);
        }
        
        .integration-card.agents {
            border-left: 4px solid var(--success);
        }
        
        .integration-card.voice {
            border-left: 4px solid #0a1d45;
        }
        
        .integration-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .integration-header i {
            font-size: 1.5rem;
        }
        
        .integration-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .integration-status.success {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }
        
        .integration-status.warning {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }
        
        .integration-status.info {
            background: rgba(6, 182, 212, 0.2);
            color: var(--info);
        }
        
        .integration-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }
        
        .integration-countdown {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
            font-family: monospace;
        }
        
        .integration-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        
        .integration-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .integration-features {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .feature-tag {
            padding: 4px 10px;
            background: rgba(139, 92, 246, 0.1);
            color: var(--secondary);
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .integration-credentials {
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 15px;
        }
        
        .credential-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-family: monospace;
        }
        
        .cred-label {
            color: var(--text-muted);
            font-size: 0.85rem;
        }
        
        .cred-value {
            color: var(--text-primary);
            font-size: 0.85rem;
            opacity: 0.9;
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 0.85rem;
        }

        .doc-card {
            background: var(--dark-card);
            padding: 20px;
            border-radius: 16px;
            border: 1px solid var(--dark-border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .doc-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            border-color: var(--primary);
        }
        
        .doc-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }
        
        .doc-title {
            font-size: 1.3rem;
            color: var(--primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .doc-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .doc-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        
        /* STATS GRID */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--dark-card);
            padding: 24px;
            border-radius: 16px;
            border: 1px solid var(--dark-border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }
        
        .stat-card.success::before {
            background: var(--gradient-success);
        }
        
        .stat-card.warning::before {
            background: var(--gradient-warning);
        }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: 12px;
        }
        
        .stat-progress {
            height: 6px;
            background: var(--dark-border);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 15px;
        }
        
        .stat-progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 3px;
            transition: width 1s ease;
        }
        
        /* TASKS BOARD */
        .tasks-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .task-column {
            background: var(--dark-card);
            border-radius: 16px;
            border: 1px solid var(--dark-border);
            overflow: hidden;
        }
        
        .column-header {
            padding: 20px;
            background: var(--dark-border);
            border-bottom: 1px solid var(--dark-border);
            font-weight: 600;
            color: var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .task-count {
            background: var(--dark-bg);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .task-list {
            padding: 20px;
            min-height: 300px;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .task-item {
            padding: 18px;
            margin-bottom: 12px;
            background: var(--dark-bg);
            border-radius: 12px;
            border: 1px solid var(--dark-border);
            display: flex;
            align-items: flex-start;
            gap: 15px;
            transition: all 0.2s ease;
            cursor: grab;
        }
        
        .task-item:hover {
            border-color: var(--primary);
            transform: translateX(5px);
        }
        
        .task-checkbox {
            width: 22px;
            height: 22px;
            border: 2px solid var(--primary);
            border-radius: 6px;
            cursor: pointer;
            background: var(--dark-card);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-top: 2px;
        }
        
        .task-checkbox.checked {
            background: var(--primary);
        }
        
        .task-checkbox.checked::after {
            content: 'âœ“';
            color: white;
            font-weight: bold;
        }
        
        .task-content {
            flex: 1;
        }
        
        .task-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        .task-meta {
            display: flex;
            gap: 15px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            flex-wrap: wrap;
        }
        
        .task-owner {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .owner-jim { background: rgba(59, 130, 246, 0.2); color: var(--primary); }
        .owner-nick { background: rgba(14, 165, 233, 0.2); color: var(--secondary); }
        .owner-ai { background: rgba(239, 68, 68, 0.2); color: var(--danger); }
        .owner-both { background: rgba(16, 185, 129, 0.2); color: var(--success); }
        
        .task-priority {
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        .priority-high { background: rgba(239, 68, 68, 0.2); color: var(--danger); }
        .priority-medium { background: rgba(245, 158, 11, 0.2); color: var(--warning); }
        .priority-low { background: rgba(16, 185, 129, 0.2); color: var(--success); }
        
        /* INFO CARDS */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .info-card {
            background: var(--dark-card);
            padding: 25px;
            border-radius: 16px;
            border: 1px solid var(--dark-border);
        }
        
        .info-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--dark-border);
        }
        
        .info-card-title {
            font-size: 1.3rem;
            color: var(--primary);
        }
        
        /* RESPONSIVE */
        @media (max-width: 1400px) {
            .main-grid {
                grid-template-columns: 250px 1fr 350px;
            }
        }
        
        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .sidebar-left, .sidebar-right {
                display: none;
            }
            
            .nav-menu {
                display: flex;
                gap: 10px;
                overflow-x: auto;
                padding-bottom: 10px;
            }
            
            .nav-item {
                flex-shrink: 0;
                margin-bottom: 0;
            }
        }
        
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .header-stats {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .tasks-board, .docs-grid, .info-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .task-meta {
                flex-direction: column;
                gap: 8px;
            }
            
            .section-title {
                font-size: 1.1rem;
                color: var(--text-primary);
            }
            
            .btn {
                padding: 8px 14px;
                font-size: 0.85rem;
            }
        }
        
        /* MOBILE RESPONSIVE - AGENT COORDINATION */
        @media (max-width: 768px) {
            /* Agent Task View */
            .agent-task-filters {
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .agent-task-filter {
                padding: 6px 12px;
                font-size: 0.85rem;
                flex: 1;
                min-width: 80px;
                text-align: center;
            }
            
            .agent-task-grid {
                grid-template-columns: 1fr;
            }
            
            .agent-task-card {
                padding: 15px;
            }
            
            /* Priority Queue */
            .priority-queue-columns {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .priority-column {
                min-height: 150px;
            }
            
            /* Workload Panel */
            .workload-panel .quick-actions {
                flex-direction: column;
                gap: 8px;
            }
            
            .workload-panel .quick-action-btn {
                width: 100%;
                justify-content: center;
            }
            
            .balance-indicator {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            /* Agent Chat */
            .agent-chat-container {
                height: 400px;
            }
            
            .agent-chat-messages {
                padding: 15px;
            }
            
            .agent-chat-message {
                max-width: 90%;
                padding: 10px 14px;
            }
            
            .agent-chat-input-area {
                padding: 10px 15px;
            }
            
            .agent-chat-input {
                padding: 10px 12px;
                font-size: 16px; /* Prevent zoom on iOS */
            }
            
            /* Performance Charts */
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .chart-container {
                height: 280px;
                padding: 15px;
            }
            
            /* Agent Workload Items */
            .agent-workload-item {
                flex-direction: column;
                gap: 10px;
                padding: 12px;
            }
            
            .agent-workload-name {
                width: 100%;
                text-align: center;
            }
            
            .agent-workload-bar {
                width: 100%;
            }
            
            .agent-workload-value {
                width: 100%;
                text-align: center;
            }
            
            /* Section Headers */
            .section-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .section-actions {
                width: 100%;
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .section-actions .btn,
            .section-actions .agent-selector {
                flex: 1;
                min-width: 140px;
            }
            
            /* Agent Selectors */
            .agent-selector {
                width: 100%;
                min-width: unset;
            }
            
            /* Priority Task Items */
            .priority-task-item {
                padding: 10px;
            }
            
            /* Modal Adjustments */
            .modal-content {
                padding: 20px;
                margin: 20px;
                max-height: 85vh;
            }
            
            /* Notifications */
            .notification-container {
                left: 15px;
                right: 15px;
                top: 15px;
            }
            
            .notification {
                padding: 12px 15px;
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 480px) {
            /* Smaller screens */
            .agent-chat-container {
                height: 350px;
            }
            
            .agent-task-header {
                flex-direction: column;
                gap: 8px;
            }
            
            .agent-task-priority {
                align-self: flex-start;
            }
            
            .agent-task-meta {
                flex-direction: column;
                gap: 5px;
            }
            
            .chart-container {
                height: 250px;
                padding: 12px;
            }
            
            .chart-title {
                font-size: 0.95rem;
            }
            
            .quick-actions {
                gap: 8px;
            }
            
            .quick-action-btn {
                padding: 10px 14px;
                font-size: 0.85rem;
            }
            
            /* Sidebar nav improvements */
            .sidebar-nav {
                padding: 15px;
            }
            
            .nav-title {
                font-size: 0.75rem;
            }
            
            .nav-item {
                padding: 10px 12px;
            }
            
            /* Touch targets - minimum 44px */
            .btn, .nav-item, .agent-task-filter, .quick-action-btn {
                min-height: 44px;
            }
            
            /* Font size adjustments for readability */
            body {
                font-size: 15px;
            }
            
            .stat-value {
                font-size: 1.5rem;
            }
            
            .stat-label {
                font-size: 0.8rem;
            }
        }
        
        /* TOUCH DEVICE OPTIMIZATIONS */
        @media (hover: none) and (pointer: coarse) {
            /* Larger touch targets on touch devices */
            .btn, .nav-item, .agent-task-filter, .quick-action-btn, 
            .agent-chat-send, .priority-task-item {
                min-height: 44px;
            }
            
            /* Remove hover effects that don't work well on touch */
            .agent-task-card:hover,
            .priority-task-item:hover,
            .quick-action-btn:hover {
                transform: none;
            }
            
            /* Add active state for touch feedback */
            .btn:active, .nav-item:active, .agent-task-filter:active {
                opacity: 0.8;
                transform: scale(0.98);
            }
        }
        
        /* SAFARI iOS FIXES */
        @supports (-webkit-touch-callout: none) {
            /* Prevent iOS zoom on input focus */
            input, select, textarea {
                font-size: 16px;
            }
            
            /* Fix iOS scroll issues */
            .agent-chat-messages {
                -webkit-overflow-scrolling: touch;
            }
            
            /* Fix iOS rounded inputs */
            .agent-chat-input {
                border-radius: 8px;
            }
        }
        
        /* ANIMATIONS */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* CUSTOM SCROLLBAR */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--dark-bg);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--dark-border);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }
        
        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: var(--dark-card);
            border-radius: 16px;
            padding: 30px;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            width: 90%;
            border: 1px solid var(--dark-border);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--dark-border);
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* FILE PREVIEW */
        .file-preview {
            background: var(--dark-bg);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--dark-border);
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        /* AGENT PROGRESS TRACKER */
        .agent-progress-tracker {
            margin: 15px 0;
        }
        
        .progress-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.85rem;
        }
        
        .progress-label {
            flex: 1;
            color: var(--text-secondary);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .progress-bar-small {
            width: 100px;
            height: 6px;
            background-color: var(--dark-border);
            border-radius: 3px;
            overflow: hidden;
            margin: 0 10px;
        }
        
        .progress-fill-small {
            height: 100%;
            border-radius: 3px;
            transition: width 0.5s ease;
        }
        
        .progress-percent {
            width: 35px;
            text-align: right;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <!-- AUTHENTICATION CHECK -->
    <script>
        // Check for valid session
        (function() {
            const session = localStorage.getItem('ascent_session');
            if (!session) {
                window.location.href = 'login.html';
                return;
            }
            
            try {
                const sessionData = JSON.parse(session);
                if (sessionData.expires < Date.now()) {
                    localStorage.removeItem('ascent_session');
                    window.location.href = 'login.html';
                    return;
                }
                
                // Store current user for display
                window.currentUser = sessionData;
            } catch (e) {
                localStorage.removeItem('ascent_session');
                window.location.href = 'login.html';
            }
        })();
    </script>
    
    <div class="dashboard">
        <!-- HEADER -->
        <div class="header">
            <div class="header-content">
                <h1><i class="fas fa-rocket"></i> Ascent XR Dashboard</h1>
            </div>
            <div style="display: flex; align-items: center; gap: 20px;">
                <div class="header-stats">
                    <div class="header-stat">
                        <div class="header-stat-value" id="daysRemaining">149</div>
                        <div class="header-stat-label">Days to Target</div>
                    </div>
                    <div class="header-stat">
                        <div class="header-stat-value" id="revenuePipeline">$45K</div>
                        <div class="header-stat-label">Pipeline Value</div>
                    </div>
                    <div class="header-stat">
                        <div class="header-stat-value" id="taskCompletion">14%</div>
                        <div class="header-stat-label">Tasks Complete</div>
                    </div>
                </div>
                
                <!-- USER MENU -->
                <div style="display: flex; align-items: center; gap: 15px; padding-left: 20px; border-left: 1px solid var(--dark-border);">
                    <div style="text-align: right;">
                        <div id="userName" style="color: var(--text-primary); font-weight: 600;">Admin</div>
                        <div id="userRole" style="color: var(--text-secondary); font-size: 0.85rem;">CEO</div>
                    </div>
                    <button onclick="logout()" style="background: var(--dark-bg); border: 1px solid var(--dark-border); color: var(--text-secondary); padding: 10px 15px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: all 0.2s;" onmouseover="this.style.color='var(--danger)'" onmouseout="this.style.color='var(--text-secondary)'">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- MAIN GRID -->
        <div class="main-grid">
            <!-- LEFT SIDEBAR - NAVIGATION -->
            <div class="sidebar-left">
                <div class="nav-section">
                    <div class="nav-title">Dashboard Views</div>
                    <ul class="nav-menu">
                        <li class="nav-item"><a href="#" class="nav-link active" data-view="overview"><i class="fas fa-tachometer-alt"></i> Overview</a></li>
                        <li class="nav-item"><a href="#" class="nav-link" data-view="tasks"><i class="fas fa-tasks"></i> Week 1 Tasks</a></li>
                        <li class="nav-item"><a href="#" class="nav-link document-link" data-doc="docs"><i class="fas fa-file-alt"></i> All Documents</a></li>
                        <li class="nav-item"><a href="#" class="nav-link document-link" data-doc="roi"><i class="fas fa-chart-line"></i> Revenue Pipeline</a></li>
                        <li class="nav-item"><a href="#" class="nav-link document-link" data-doc="gallery"><i class="fab fa-linkedin"></i> LinkedIn Posts</a></li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <div class="nav-title">Quick Links</div>
                    <ul class="nav-menu">
                        <li class="nav-item"><a href="#" class="nav-link document-link" data-doc="dashboard"><i class="fas fa-chart-bar"></i> Dashboard Docs</a></li>
                        <li class="nav-item"><a href="#" class="nav-link document-link" data-doc="linkedin"><i class="fas fa-bullhorn"></i> LinkedIn Strategy</a></li>
                        <li class="nav-item"><a href="#" class="nav-link document-link" data-doc="roi"><i class="fas fa-calculator"></i> ROI Template</a></li>
                        <li class="nav-item"><a href="#" class="nav-link document-link" data-doc="constitution"><i class="fas fa-book"></i> Ascent XR Principles</a></li>
                        <li class="nav-item"><a href="#" class="nav-link document-link" data-doc="nick"><i class="fas fa-user-friends"></i> Nick Status</a></li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <div class="nav-title">Team Members</div>
                    <ul class="nav-menu">
                        <li class="nav-item"><a href="#" class="nav-link"><i class="fas fa-user" style="color: var(--primary)"></i> Jim (CEO)</a></li>
                        <li class="nav-item"><a href="#" class="nav-link"><i class="fas fa-user" style="color: var(--secondary)"></i> Nick (CTO)</a></li>
                        <li class="nav-item"><a href="#" class="nav-link"><i class="fas fa-robot" style="color: var(--danger)"></i> AI Assistant</a></li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <div class="nav-title">Status</div>
                    <div style="padding: 15px; background: var(--dark-bg); border-radius: 10px; border: 1px solid var(--dark-border);">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 12px; height: 12px; background: var(--success); border-radius: 50%;"></div>
                            <span style="color: var(--text-primary);">Dashboard Active</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 12px; height: 12px; background: var(--warning); border-radius: 50%;"></div>
                            <span style="color: var(--text-primary);">Week 1 in Progress</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div style="width: 12px; height: 12px; background: var(--primary); border-radius: 50%;"></div>
                            <span style="color: var(--text-primary);">LinkedIn Ready</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CENTER CONTENT AREA -->
            <div class="content-area">
                <!-- OVERVIEW SECTION -->
                <div id="overviewView" class="view-content">
                    <!-- VISUAL STATS CARDS WITH ICONS -->
                    <div class="stats-grid">
                        <div class="stat-card" style="background: linear-gradient(135deg, var(--dark-card) 0%, rgba(10, 29, 69, 0.5) 100%); border-left: 4px solid #22c55e;">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white;">
                                    <i class="fas fa-dollar-sign"></i>
                                </div>
                                <div style="font-size: 2rem; font-weight: 700; color: #22c55e;">$300K</div>
                            </div>
                            <div class="stat-label">Revenue Target by June 30</div>
                            <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                                <div class="stat-progress" style="flex: 1;">
                                    <div class="stat-progress-bar" style="width: 15%; background: linear-gradient(90deg, #22c55e 0%, #16a34a 100%);"></div>
                                </div>
                                <span style="font-size: 0.85rem; color: var(--text-secondary);">15%</span>
                            </div>
                        </div>
                        
                        <div class="stat-card" style="background: linear-gradient(135deg, var(--dark-card) 0%, rgba(59, 130, 246, 0.5) 100%); border-left: 4px solid #3b82f6;">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white;">
                                    <i class="fas fa-tasks"></i>
                                </div>
                                <div style="font-size: 2rem; font-weight: 700; color: #3b82f6;">14</div>
                            </div>
                            <div class="stat-label">Week 1 Tasks</div>
                            <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                                <div class="stat-progress" style="flex: 1;">
                                    <div class="stat-progress-bar" style="width: 14%; background: linear-gradient(90deg, #3b82f6 0%, #2563eb 100%);"></div>
                                </div>
                                <span style="font-size: 0.85rem; color: var(--text-secondary);">14%</span>
                            </div>
                        </div>
                        
                        <div class="stat-card" style="background: linear-gradient(135deg, var(--dark-card) 0%, rgba(245, 158, 11, 0.5) 100%); border-left: 4px solid #f59e0b;">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white;">
                                    <i class="fab fa-linkedin"></i>
                                </div>
                                <div style="font-size: 2rem; font-weight: 700; color: #f59e0b;">3</div>
                            </div>
                            <div class="stat-label">LinkedIn Posts Ready</div>
                            <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                                <div class="stat-progress" style="flex: 1;">
                                    <div class="stat-progress-bar" style="width: 100%; background: linear-gradient(90deg, #f59e0b 0%, #d97706 100%);"></div>
                                </div>
                                <span style="font-size: 0.85rem; color: var(--text-secondary);">100%</span>
                            </div>
                        </div>
                        
                        <div class="stat-card" style="background: linear-gradient(135deg, var(--dark-card) 0%, rgba(220, 22, 37, 0.2) 100%); border-left: 4px solid #DC1625;">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                                <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #DC1625 0%, #b91c1c 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white;">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div style="font-size: 2rem; font-weight: 700; color: #DC1625;">5</div>
                            </div>
                            <div class="stat-label">Active Prospects</div>
                            <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                                <div class="stat-progress" style="flex: 1;">
                                    <div class="stat-progress-bar" style="width: 50%; background: linear-gradient(90deg, #DC1625 0%, #b91c1c 100%);"></div>
                                </div>
                                <span style="font-size: 0.85rem; color: var(--text-secondary);">50%</span>
                            </div>
                        </div>
                    </div>

                    <!-- ANALYTICS & CHARTS SECTION -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-title"><i class="fas fa-chart-pie"></i> Analytics Dashboard</div>
                            <div class="section-actions">
                                <button class="btn btn-secondary" onclick="refreshAnalytics()"><i class="fas fa-sync-alt"></i> Refresh</button>
                                <button class="btn" onclick="exportAnalytics()"><i class="fas fa-download"></i> Export</button>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 25px; margin-bottom: 30px;">
                            <!-- Revenue Trend Chart -->
                            <div style="background: var(--dark-card); border-radius: 16px; padding: 25px; border: 1px solid var(--dark-border);">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                                    <h3 style="color: var(--text-primary); font-size: 1.1rem;"><i class="fas fa-chart-line" style="color: #22c55e; margin-right: 8px;"></i>Revenue Pipeline Trend</h3>
                                    <span style="background: rgba(34, 197, 94, 0.2); color: #22c55e; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem;">+23% vs last month</span>
                                </div>
                                <canvas id="revenueTrendChart" height="200"></canvas>
                            </div>
                            
                            <!-- Agent Performance Chart -->
                            <div style="background: var(--dark-card); border-radius: 16px; padding: 25px; border: 1px solid var(--dark-border);">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                                    <h3 style="color: var(--text-primary); font-size: 1.1rem;"><i class="fas fa-robot" style="color: #3b82f6; margin-right: 8px;"></i>Agent Performance</h3>
                                    <span style="background: rgba(59, 130, 246, 0.2); color: #3b82f6; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem;">92% Avg</span>
                                </div>
                                <canvas id="agentPerformanceChart" height="200"></canvas>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px;">
                            <!-- Task Distribution Doughnut -->
                            <div style="background: var(--dark-card); border-radius: 16px; padding: 25px; border: 1px solid var(--dark-border);">
                                <h3 style="color: var(--text-primary); font-size: 1.1rem; margin-bottom: 20px;"><i class="fas fa-chart-pie" style="color: #f59e0b; margin-right: 8px;"></i>Task Distribution</h3>
                                <canvas id="taskDistributionChart" height="250"></canvas>
                            </div>
                            
                            <!-- Weekly Activity Bar Chart -->
                            <div style="background: var(--dark-card); border-radius: 16px; padding: 25px; border: 1px solid var(--dark-border);">
                                <h3 style="color: var(--text-primary); font-size: 1.1rem; margin-bottom: 20px;"><i class="fas fa-chart-bar" style="color: #8b5cf6; margin-right: 8px;"></i>Weekly Activity</h3>
                                <canvas id="weeklyActivityChart" height="250"></canvas>
                            </div>
                            
                            <!-- Key Metrics Cards -->
                            <div style="display: grid; grid-template-columns: 1fr; gap: 15px;">
                                <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(34, 197, 94, 0.05) 100%); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 12px; padding: 20px; display: flex; align-items: center; gap: 15px;">
                                    <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white;">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                    <div>
                                        <div style="font-size: 1.8rem; font-weight: 700; color: #22c55e;">847</div>
                                        <div style="color: var(--text-secondary); font-size: 0.9rem;">Tasks Completed</div>
                                    </div>
                                </div>
                                
                                <div style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(59, 130, 246, 0.05) 100%); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; padding: 20px; display: flex; align-items: center; gap: 15px;">
                                    <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white;">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <div>
                                        <div style="font-size: 1.8rem; font-weight: 700; color: #3b82f6;">2.4h</div>
                                        <div style="color: var(--text-secondary); font-size: 0.9rem;">Avg Response Time</div>
                                    </div>
                                </div>
                                
                                <div style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(245, 158, 11, 0.05) 100%); border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 12px; padding: 20px; display: flex; align-items: center; gap: 15px;">
                                    <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: white;">
                                        <i class="fas fa-trophy"></i>
                                    </div>
                                    <div>
                                        <div style="font-size: 1.8rem; font-weight: 700; color: #f59e0b;">94%</div>
                                        <div style="color: var(--text-secondary); font-size: 0.9rem;">Success Rate</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DOCUMENTATION CARDS -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-title"><i class="fas fa-file-alt"></i> Key Documentation</div>
                            <div class="section-actions">
                                <button class="btn btn-secondary" onclick="exportAllDocs()"><i class="fas fa-download"></i> Export All</button>
                            </div>
                        </div>
                        <div class="docs-grid">
                            <div class="doc-card" onclick="openDocument('dashboard')">
                                <div class="doc-title"><i class="fas fa-chart-bar"></i> Ascent XR DASHBOARD</div>
                                <div class="doc-description">Complete 90-day action plan, revenue pipeline tracking, critical metrics, and Week 1 task breakdown.</div>
                                <div class="doc-meta">
                                    <span><i class="far fa-clock"></i> Updated Jan 31</span>
                                    <span><i class="fas fa-file-lines"></i> 4,901 bytes</span>
                                </div>
                            </div>
                            <div class="doc-card" onclick="openDocument('linkedin')">
                                <div class="doc-title"><i class="fab fa-linkedin"></i> LINKEDIN STRATEGY</div>
                                <div class="doc-description">Complete content strategy with 3 draft posts, content calendar, engagement plan, and outreach templates.</div>
                                <div class="doc-meta">
                                    <span><i class="far fa-clock"></i> Updated Jan 31</span>
                                    <span><i class="fas fa-file-lines"></i> 7,883 bytes</span>
                                </div>
                            </div>
                            <div class="doc-card" onclick="openDocument('roi')">
                                <div class="doc-title"><i class="fas fa-calculator"></i> ROI TEMPLATE</div>
                                <div class="doc-description">ROI documentation template for school districts with usage metrics, standards alignment, and ROI calculation.</div>
                                <div class="doc-meta">
                                    <span><i class="far fa-clock"></i> Updated Jan 31</span>
                                    <span><i class="fas fa-file-lines"></i> 5,100 bytes</span>
                                </div>
                            </div>
                            <div class="doc-card" onclick="openDocument('constitution')">
                                <div class="doc-title"><i class="fas fa-book"></i> ASCENT CONSTITUTION</div>
                                <div class="doc-description">Core principles, priority hierarchy, and decision-making framework for responsible educational technology.</div>
                                <div class="doc-meta">
                                    <span><i class="far fa-clock"></i> Updated Jan 31</span>
                                    <span><i class="fas fa-file-lines"></i> 10,000 bytes</span>
                                </div>
                            </div>
                            <div class="doc-card" onclick="openDocument('nick')">
                                <div class="doc-title"><i class="fas fa-user-friends"></i> NICK STATUS</div>
                                <div class="doc-description">Current projects and priorities for Nick: food web, co-signs, restorative model development status.</div>
                                <div class="doc-meta">
                                    <span><i class="far fa-clock"></i> Updated Jan 31</span>
                                    <span><i class="fas fa-file-lines"></i> 1,479 bytes</span>
                                </div>
                            </div>
                            <div class="doc-card" onclick="openDocument('schedule')">
                                <div class="doc-title"><i class="fas fa-calendar-check"></i> LINKEDIN SCHEDULE</div>
                                <div class="doc-description">Week 1 execution schedule with posting times, responsibilities, and performance tracking.</div>
                                <div class="doc-meta">
                                    <span><i class="far fa-clock"></i> Updated Feb 1</span>
                                    <span><i class="fas fa-file-lines"></i> 4,748 bytes</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- INTEGRATIONS DASHBOARD -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-title"><i class="fas fa-puzzle-piece"></i> System Integrations</div>
                            <div class="section-actions">
                                <button class="btn btn-primary" onclick="refreshIntegrations()"><i class="fas fa-sync-alt"></i> Refresh</button>
                            </div>
                        </div>
                        <div class="integrations-grid">
                            <!-- LINKEDIN LAUNCH COUNTDOWN -->
                            <div class="integration-card linkedin">
                                <div class="integration-header">
                                    <i class="fab fa-linkedin"></i>
                                    <div class="integration-status success">LIVE</div>
                                </div>
                                <div class="integration-title">LinkedIn Launch</div>
                                <div class="integration-countdown" id="linkedinCountdown">48h 00m 00s</div>
                                <div class="integration-description">3 posts scheduled â€¢ Next: Feb 3, 8:30 AM EST</div>
                                <div class="integration-stats">
                                    <div class="stat-item">
                                        <span class="stat-label">Posts Ready</span>
                                        <span class="stat-value">3/3</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">Images Generated</span>
                                        <span class="stat-value">3</span>
                                    </div>
                                </div>
                                <button class="btn btn-sm" onclick="previewLinkedInPosts()">Preview Posts</button>
                            </div>

                            <!-- CRM INTEGRATION -->
                            <div class="integration-card crm">
                                <div class="integration-header">
                                    <i class="fas fa-database"></i>
                                    <div class="integration-status warning">TESTING</div>
                                </div>
                                <div class="integration-title">CRM Connection</div>
                                <div class="integration-description">https://web-production-f0ae1.up.railway.app/</div>
                                <div class="integration-credentials">
                                    <div class="credential-item">
                                        <span class="cred-label">Email:</span>
                                        <span class="cred-value">sam@ltvr-system.local</span>
                                    </div>
                                </div>
                                <button class="btn btn-sm" onclick="testCRMConnection()">Test Connection</button>
                            </div>

                            <!-- AGENT PROGRESS TRACKING -->
                            <div class="integration-card agents">
                                <div class="integration-header">
                                    <i class="fas fa-robot"></i>
                                    <div class="integration-status success">LIVE TRACKING</div>
                                </div>
                                <div class="integration-title">Agent Progress</div>
                                <div class="integration-description">Real-time agent status & completion</div>
                                
                                <!-- REAL AGENT PROGRESS BARS -->
                                <div class="agent-progress-tracker">
                                    <div class="progress-item">
                                        <div class="progress-label">Backend Integration</div>
                                        <div class="progress-bar-small">
                                            <div class="progress-fill-small" style="width: 25%; background-color: var(--primary);"></div>
                                        </div>
                                        <div class="progress-percent">25%</div>
                                    </div>
                                    <div class="progress-item">
                                        <div class="progress-label">Quality Assurance</div>
                                        <div class="progress-bar-small">
                                            <div class="progress-fill-small" style="width: 80%; background-color: var(--success);"></div>
                                        </div>
                                        <div class="progress-percent">80%</div>
                                    </div>
                                    <div class="progress-item">
                                        <div class="progress-label">Deployment</div>
                                        <div class="progress-bar-small">
                                            <div class="progress-fill-small" style="width: 15%; background-color: var(--warning);"></div>
                                        </div>
                                        <div class="progress-percent">15%</div>
                                    </div>
                                </div>
                                
                                <div class="integration-stats">
                                    <div class="stat-item">
                                        <span class="stat-label">Total Agents</span>
                                        <span class="stat-value" id="activeAgentCount">12</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">Active Now</span>
                                        <span class="stat-value" id="totalAgentCount">3</span>
                                    </div>
                                </div>
                                <button class="btn btn-sm" onclick="viewAgentRegistry()">View Details</button>
                            </div>

                            <!-- VOICE INTERFACE -->
                            <div class="integration-card voice">
                                <div class="integration-header">
                                    <i class="fas fa-microphone"></i>
                                    <div class="integration-status info">CONFIGURING</div>
                                </div>
                                <div class="integration-title">Samantha Voice</div>
                                <div class="integration-description">Bewitched-style interactive experience</div>
                                <div class="integration-features">
                                    <span class="feature-tag">Charming</span>
                                    <span class="feature-tag">Magical</span>
                                    <span class="feature-tag">Delightful</span>
                                </div>
                                <button class="btn btn-sm" onclick="testVoiceInterface()">Test Voice</button>
                            </div>
                        </div>
                    </div>

                    <!-- AGENT TRACKING SECTION -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-title"><i class="fas fa-robot"></i> Agent Progress Tracking</div>
                            <div class="section-actions">
                                <button class="btn" onclick="refreshAgentData()"><i class="fas fa-sync-alt"></i> Refresh</button>
                                <button class="btn btn-secondary" onclick="exportAgentReport()"><i class="fas fa-file-export"></i> Export Report</button>
                            </div>
                        </div>
                        
                        <!-- AGENT STATS SUMMARY -->
                        <div class="stats-grid" style="margin-bottom: 30px;">
                            <div class="stat-card">
                                <div class="stat-value" id="totalAgents">5</div>
                                <div class="stat-label">Total Agents</div>
                                <div class="stat-progress">
                                    <div class="stat-progress-bar" style="width: 100%; background: linear-gradient(135deg, #0a1d45 0%, #1d4ed8 100%);"></div>
                                </div>
                            </div>
                            <div class="stat-card success">
                                <div class="stat-value" id="activeAgents">3</div>
                                <div class="stat-label">Active Agents</div>
                                <div class="stat-progress">
                                    <div class="stat-progress-bar" style="width: 60%; background: linear-gradient(135deg, #ff6b00 0%, #0d9488 100%);"></div>
                                </div>
                            </div>
                            <div class="stat-card warning">
                                <div class="stat-value" id="completedAgents">2</div>
                                <div class="stat-label">Completed</div>
                                <div class="stat-progress">
                                    <div class="stat-progress-bar" style="width: 40%; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);"></div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="completionRate">40%</div>
                                <div class="stat-label">Overall Completion</div>
                                <div class="stat-progress">
                                    <div class="stat-progress-bar" id="overallCompletionBar" style="width: 40%;"></div>
                                </div>
                            </div>
                        </div>

                        <!-- LIVE AGENT REGISTRY -->
                        <div style="margin-bottom: 30px;">
                            <div class="section-header" style="border-bottom: none; margin-bottom: 15px;">
                                <div class="section-title"><i class="fas fa-list"></i> Live Agent Registry</div>
                                <div class="section-actions">
                                    <div class="integration-status success">LIVE DATA</div>
                                </div>
                            </div>
                            <div class="agent-registry-container" id="agentRegistry">
                                <!-- Agent cards will be loaded here -->
                            </div>
                        </div>

                        <!-- AGENT METRICS DETAILS -->
                        <div class="info-grid">
                            <div class="info-card">
                                <div class="info-card-header">
                                    <i class="fas fa-chart-line" style="color: var(--primary);"></i>
                                    <div class="info-card-title">Task Completion Metrics</div>
                                </div>
                                <div style="margin-top: 15px;">
                                    <div class="metric-row">
                                        <span style="color: var(--text-secondary);">Current Week Completion:</span>
                                        <span style="color: var(--primary); font-weight: 600;" id="weekCompletion">14%</span>
                                    </div>
                                    <div class="progress-bar" style="margin: 10px 0;">
                                        <div class="progress-fill" id="weekCompletionBar" style="width: 14%; background-color: var(--primary);"></div>
                                    </div>
                                    
                                    <div class="metric-row">
                                        <span style="color: var(--text-secondary);">LinkedIn Posts Ready:</span>
                                        <span style="color: var(--success); font-weight: 600;" id="linkedinReady">3/3</span>
                                    </div>
                                    <div class="progress-bar" style="margin: 10px 0;">
                                        <div class="progress-fill" id="linkedinBar" style="width: 100%; background-color: var(--success);"></div>
                                    </div>
                                    
                                    <div class="metric-row">
                                        <span style="color: var(--text-secondary);">CRM Tasks Complete:</span>
                                        <span style="color: var(--warning); font-weight: 600;" id="crmProgress">1/5</span>
                                    </div>
                                    <div class="progress-bar" style="margin: 10px 0;">
                                        <div class="progress-fill" id="crmBar" style="width: 20%; background-color: var(--warning);"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="info-card">
                                <div class="info-card-header">
                                    <i class="fas fa-clock" style="color: var(--secondary);"></i>
                                    <div class="info-card-title">Time Tracking</div>
                                </div>
                                <div style="margin-top: 15px;">
                                    <div class="metric-row">
                                        <span style="color: var(--text-secondary);">Average Agent Runtime:</span>
                                        <span style="color: var(--text-primary); font-weight: 600;" id="avgRuntime">2.8h</span>
                                    </div>
                                    <div class="metric-row">
                                        <span style="color: var(--text-secondary);">Longest Running Agent:</span>
                                        <span style="color: var(--text-primary); font-weight: 600;" id="longestRuntime">Main Agent (5.2h)</span>
                                    </div>
                                    <div class="metric-row">
                                        <span style="color: var(--text-secondary);">Total Hours This Week:</span>
                                        <span style="color: var(--success); font-weight: 600;" id="totalHours">14.6h</span>
                                    </div>
                                    <div class="metric-row">
                                        <span style="color: var(--text-secondary);">ETA to Week Completion:</span>
                                        <span style="color: var(--primary); font-weight: 600;" id="weekETA">5.2 days</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="info-card">
                                <div class="info-card-header">
                                    <i class="fas fa-star" style="color: var(--success);"></i>
                                    <div class="info-card-title">Quality Metrics</div>
                                </div>
                                <div style="margin-top: 15px;">
                                    <div class="metric-row">
                                        <span style="color: var(--text-secondary);">Test Scores:</span>
                                        <div style="display: inline-flex; align-items: center; gap: 5px;">
                                            <span style="color: var(--success); font-weight: 600;">94%</span>
                                            <i class="fas fa-chart-line" style="color: var(--success); font-size: 0.9rem;"></i>
                                        </div>
                                    </div>
                                    <div class="metric-row">
                                        <span style="color: var(--text-secondary);">Bug Reports:</span>
                                        <div style="display: inline-flex; align-items: center; gap: 5px;">
                                            <span style="color: var(--warning); font-weight: 600;">3</span>
                                            <i class="fas fa-bug" style="color: var(--warning); font-size: 0.9rem;"></i>
                                        </div>
                                    </div>
                                    <div class="metric-row">
                                        <span style="color: var(--text-secondary);">Validation Status:</span>
                                        <div style="display: inline-flex; align-items: center; gap: 5px;">
                                            <span style="color: var(--success); font-weight: 600;">85%</span>
                                            <div style="width: 60px; height: 6px; background: var(--dark-border); border-radius: 3px; overflow: hidden;">
                                                <div style="width: 85%; height: 100%; background: var(--success);"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="metric-row">
                                        <span style="color: var(--text-secondary);">AI Accuracy:</span>
                                        <div style="display: inline-flex; align-items: center; gap: 5px;">
                                            <span style="color: var(--info); font-weight: 600;">92%</span>
                                            <div style="width: 60px; height: 6px; background: var(--dark-border); border-radius: 3px; overflow: hidden;">
                                                <div style="width: 92%; height: 100%; background: var(--info);"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AGENT COORDINATION ENHANCED SYSTEM -->
                    
                    <!-- 1. AGENT-SPECIFIC TASK VIEWS -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-title"><i class="fas fa-user-astronaut"></i> Agent Task Assignments</div>
                            <div class="section-actions">
                                <select class="agent-selector" id="agentTaskFilter" onchange="filterAgentTasks()">
                                    <option value="all">All Agents</option>
                                    <optgroup label="Sales & CRM">
                                        <option value="sdr_agent">SDR Agent</option>
                                        <option value="crm_sales_agent">CRM & Sales Pipeline Agent</option>
                                    </optgroup>
                                    <optgroup label="Finance">
                                        <option value="financial_agent">Financial Agent (CPA)</option>
                                    </optgroup>
                                    <optgroup label="Content & Marketing">
                                        <option value="content_creator">LinkedIn Execution Agent</option>
                                        <option value="ai_content">AI Content Generation Agent</option>
                                        <option value="email_automation">Email Automation Agent</option>
                                    </optgroup>
                                    <optgroup label="Design & Development">
                                        <option value="designer">Branding & Design Agent</option>
                                        <option value="developer">CRM Development Agent</option>
                                        <option value="dashboard_enhancement">Dashboard Enhancement Agent</option>
                                        <option value="graphic_design">Graphic Design Agent</option>
                                    </optgroup>
                                    <optgroup label="Analytics & Research">
                                        <option value="analytics">Analytics & Reporting Agent</option>
                                        <option value="market_research">Market Research Agent</option>
                                    </optgroup>
                                    <optgroup label="Operations">
                                        <option value="proposal_contract">Proposal & Contract Agent</option>
                                        <option value="slack_troubleshooter">Slack Troubleshooter</option>
                                    </optgroup>
                                </select>
                                <button class="btn btn-primary" onclick="autoAssignAllTasks()"><i class="fas fa-magic"></i> Auto-Assign All</button>
                            </div>
                        </div>
                        
                        <div class="agent-task-view">
                            <div class="agent-task-filters">
                                <div class="agent-task-filter active" onclick="filterTasksByPriority('all')">All Tasks</div>
                                <div class="agent-task-filter" onclick="filterTasksByPriority('critical')">Critical</div>
                                <div class="agent-task-filter" onclick="filterTasksByPriority('high')">High</div>
                                <div class="agent-task-filter" onclick="filterTasksByPriority('medium')">Medium</div>
                                <div class="agent-task-filter" onclick="filterTasksByPriority('low')">Low</div>
                            </div>
                            
                            <div class="agent-task-grid" id="agentTaskGrid">
                                <!-- Tasks will be dynamically loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- 2. PRIORITY QUEUE SYSTEM -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-title"><i class="fas fa-sort-amount-down"></i> Priority Task Queue</div>
                            <div class="section-actions">
                                <button class="btn" onclick="refreshPriorityQueue()"><i class="fas fa-sync-alt"></i> Refresh</button>
                                <button class="btn btn-secondary" onclick="addPriorityTask()"><i class="fas fa-plus"></i> Add Task</button>
                            </div>
                        </div>
                        
                        <div class="priority-queue">
                            <div class="priority-queue-columns" id="priorityQueueContainer">
                                <div class="priority-column critical" data-priority="critical">
                                    <div class="priority-column-header">
                                        <span><i class="fas fa-exclamation-circle"></i> Critical</span>
                                        <span class="task-count" id="criticalCount">0</span>
                                    </div>
                                    <div class="priority-tasks" id="criticalTasks"></div>
                                </div>
                                <div class="priority-column high" data-priority="high">
                                    <div class="priority-column-header">
                                        <span><i class="fas fa-arrow-up"></i> High</span>
                                        <span class="task-count" id="highCount">0</span>
                                    </div>
                                    <div class="priority-tasks" id="highTasks"></div>
                                </div>
                                <div class="priority-column medium" data-priority="medium">
                                    <div class="priority-column-header">
                                        <span><i class="fas fa-minus"></i> Medium</span>
                                        <span class="task-count" id="mediumCount">0</span>
                                    </div>
                                    <div class="priority-tasks" id="mediumTasks"></div>
                                </div>
                                <div class="priority-column low" data-priority="low">
                                    <div class="priority-column-header">
                                        <span><i class="fas fa-arrow-down"></i> Low</span>
                                        <span class="task-count" id="lowCount">0</span>
                                    </div>
                                    <div class="priority-tasks" id="lowTasks"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 3. WORKLOAD BALANCING PANEL -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-title"><i class="fas fa-balance-scale"></i> Workload Balancing</div>
                            <div class="section-actions">
                                <button class="btn" onclick="analyzeWorkload()"><i class="fas fa-chart-pie"></i> Analyze</button>
                                <button class="btn btn-primary" onclick="rebalanceWorkload()"><i class="fas fa-sync"></i> Rebalance</button>
                            </div>
                        </div>
                        
                        <div class="workload-panel">
                            <div class="balance-indicator" id="balanceIndicator">
                                <div class="balance-indicator-icon"><i class="fas fa-check-circle" style="color: #10b981;"></i></div>
                                <div class="balance-indicator-text">
                                    <div style="font-weight: 600;">Workload Distribution</div>
                                    <div style="color: var(--text-secondary); font-size: 0.9rem;">Optimal balance across all agents</div>
                                </div>
                                <div class="balance-indicator-status optimal">OPTIMAL</div>
                            </div>
                            
                            <div id="workloadChartContainer">
                                <!-- Workload bars will be rendered here -->
                            </div>
                            
                            <div class="quick-actions">
                                <button class="quick-action-btn" onclick="redistributeTasks()">
                                    <i class="fas fa-random"></i> Redistribute Tasks
                                </button>
                                <button class="quick-action-btn" onclick="identifyBottlenecks()">
                                    <i class="fas fa-search"></i> Find Bottlenecks
                                </button>
                                <button class="quick-action-btn" onclick="suggestReassignments()">
                                    <i class="fas fa-lightbulb"></i> Suggest Reassignments
                                </button>
                                <button class="quick-action-btn" onclick="viewCapacityPlanning()">
                                    <i class="fas fa-calendar-alt"></i> Capacity Planning
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 4. AGENT COMMUNICATION HUB -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-title"><i class="fas fa-comments"></i> Agent Communication Hub</div>
                            <div class="section-actions">
                                <select class="agent-selector" id="chatAgentSelector">
                                    <option value="broadcast">ðŸ“¢ Broadcast to All</option>
                                    <optgroup label="Sales & CRM">
                                        <option value="sdr_agent">SDR Agent</option>
                                        <option value="crm_sales_agent">CRM & Sales Pipeline Agent</option>
                                    </optgroup>
                                    <optgroup label="Finance">
                                        <option value="financial_agent">Financial Agent (CPA)</option>
                                    </optgroup>
                                    <optgroup label="Content & Marketing">
                                        <option value="content_creator">LinkedIn Execution Agent</option>
                                        <option value="ai_content">AI Content Generation Agent</option>
                                        <option value="email_automation">Email Automation Agent</option>
                                    </optgroup>
                                    <optgroup label="Design & Development">
                                        <option value="designer">Branding & Design Agent</option>
                                        <option value="developer">CRM Development Agent</option>
                                        <option value="dashboard_enhancement">Dashboard Enhancement Agent</option>
                                        <option value="graphic_design">Graphic Design Agent</option>
                                    </optgroup>
                                    <optgroup label="Analytics & Research">
                                        <option value="analytics">Analytics & Reporting Agent</option>
                                        <option value="market_research">Market Research Agent</option>
                                    </optgroup>
                                    <optgroup label="Operations & Coordination">
                                        <option value="coordination_system">Agent Coordination System</option>
                                        <option value="communication_protocol">Communication Protocol</option>
                                        <option value="proposal_contract">Proposal & Contract Agent</option>
                                    </optgroup>
                                </select>
                                <button class="btn" onclick="clearChatHistory()"><i class="fas fa-trash"></i> Clear</button>
                            </div>
                        </div>
                        
                        <div class="agent-chat-container">
                            <div class="agent-chat-header">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <div style="font-weight: 600;"><i class="fas fa-robot"></i> Agent Team Chat</div>
                                        <div style="font-size: 0.85rem; color: var(--text-secondary);">17 agents connected</div>
                                    </div>
                                    <div style="display: flex; gap: 8px;">
                                        <span class="feature-tag" style="background: rgba(16, 185, 129, 0.2); color: #10b981;">8 Online</span>
                                        <span class="feature-tag" style="background: rgba(245, 158, 11, 0.2); color: #f59e0b;">3 Busy</span>
                                        <span class="feature-tag" style="background: rgba(148, 163, 184, 0.2); color: #94a3b8;">3 Offline</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="agent-chat-messages" id="agentChatMessages">
                                <!-- Messages will be loaded here -->
                            </div>
                            
                            <div class="agent-chat-input-area">
                                <input type="text" class="agent-chat-input" id="agentChatInput" 
                                       placeholder="Type a message to agents..." 
                                       onkeypress="handleChatKeypress(event)">
                                <button class="agent-chat-send" onclick="sendAgentChatMessage()">
                                    <i class="fas fa-paper-plane"></i> Send
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 5. PERFORMANCE CHARTS -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-title"><i class="fas fa-chart-bar"></i> Agent Performance Analytics</div>
                            <div class="section-actions">
                                <select class="agent-selector" id="chartTimeRange" onchange="updatePerformanceCharts()">
                                    <option value="24h">Last 24 Hours</option>
                                    <option value="7d" selected>Last 7 Days</option>
                                    <option value="30d">Last 30 Days</option>
                                    <option value="all">All Time</option>
                                </select>
                                <button class="btn" onclick="exportChartData()"><i class="fas fa-download"></i> Export Data</button>
                            </div>
                        </div>
                        
                        <div class="performance-charts">
                            <div class="charts-grid">
                                <div class="chart-container">
                                    <div class="chart-title"><i class="fas fa-tachometer-alt"></i> Task Completion Rate by Agent</div>
                                    <canvas id="completionRateChart"></canvas>
                                </div>
                                <div class="chart-container">
                                    <div class="chart-title"><i class="fas fa-clock"></i> Average Response Time</div>
                                    <canvas id="responseTimeChart"></canvas>
                                </div>
                                <div class="chart-container">
                                    <div class="chart-title"><i class="fas fa-trophy"></i> Success Rate Trends</div>
                                    <canvas id="successRateTrendChart"></canvas>
                                </div>
                                <div class="chart-container">
                                    <div class="chart-title"><i class="fas fa-tasks"></i> Workload Distribution</div>
                                    <canvas id="workloadDistributionChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- TASKS OVERVIEW -->
                    <div class="section">
                        <div class="section-header">
                            <div class="section-title"><i class="fas fa-tasks"></i> Week 1 Task Overview (Feb 1-7)</div>
                            <div class="section-actions">
                                <button class="btn" onclick="switchView('tasks')"><i class="fas fa-external-link-alt"></i> View Details</button>
                            </div>
                        </div>
                        <div class="tasks-board">
                            <div class="task-column">
                                <div class="column-header">
                                    <span><i class="fas fa-user" style="color: var(--primary)"></i> Jim's Tasks</span>
                                    <span class="task-count" id="jimCount">3</span>
                                </div>
                                <div class="task-list" id="jimTasks">
                                    <!-- Jim's tasks will be loaded here -->
                                </div>
                            </div>
                            <div class="task-column">
                                <div class="column-header">
                                    <span><i class="fas fa-user" style="color: var(--secondary)"></i> Nick's Tasks</span>
                                    <span class="task-count" id="nickCount">4</span>
                                </div>
                                <div class="task-list" id="nickTasks">
                                    <!-- Nick's tasks will be loaded here -->
                                </div>
                            </div>
                            <div class="task-column">
                                <div class="column-header">
                                    <span><i class="fas fa-robot" style="color: var(--danger)"></i> AI Assistant Tasks</span>
                                    <span class="task-count" id="aiCount">5</span>
                                </div>
                                <div class="task-list" id="aiTasks">
                                    <!-- AI tasks will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TASKS VIEW -->
                <div id="tasksView" class="view-content" style="display: none;">
                    <div class="section">
                        <div class="section-header">
                            <div class="section-title"><i class="fas fa-calendar-day"></i> Week 1 Detailed Tasks (February 1-7, 2026)</div>
                            <div class="section-actions">
                                <button class="btn btn-secondary" onclick="addNewTask()"><i class="fas fa-plus"></i> Add Task</button>
                                <button class="btn" onclick="markAllComplete()"><i class="fas fa-check-double"></i> Mark All Complete</button>
                            </div>
                        </div>
                        
                        <div class="info-grid">
                            <div class="info-card">
                                <div class="info-card-header">
                                    <i class="fas fa-user" style="color: var(--primary); font-size: 1.5rem;"></i>
                                    <div class="info-card-title">Jim's Responsibilities</div>
                                </div>
                                <div class="task-list" id="detailedJimTasks">
                                    <!-- Detailed Jim tasks -->
                                </div>
                            </div>
                            
                            <div class="info-card">
                                <div class="info-card-header">
                                    <i class="fas fa-user" style="color: var(--secondary); font-size: 1.5rem;"></i>
                                    <div class="info-card-title">Nick's Responsibilities</div>
                                </div>
                                <div class="task-list" id="detailedNickTasks">
                                    <!-- Detailed Nick tasks -->
                                </div>
                            </div>
                            
                            <div class="info-card">
                                <div class="info-card-header">
                                    <i class="fas fa-robot" style="color: var(--danger); font-size: 1.5rem;"></i>
                                    <div class="info-card-title">AI Assistant Responsibilities</div>
                                </div>
                                <div class="task-list" id="detailedAiTasks">
                                    <!-- Detailed AI tasks -->
                                </div>
                            </div>
                            
                            <div class="info-card">
                                <div class="info-card-header">
                                    <i class="fas fa-handshake" style="color: var(--success); font-size: 1.5rem;"></i>
                                    <div class="info-card-title">Joint Responsibilities</div>
                                </div>
                                <div class="task-list" id="detailedJointTasks">
                                    <!-- Detailed joint tasks -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DOCUMENTS VIEW -->
                <div id="documentsView" class="view-content" style="display: none;">
                    <!-- Documents view will be loaded dynamically -->
                </div>

                <!-- REVENUE VIEW -->
                <div id="revenueView" class="view-content" style="display: none;">
                    <!-- Revenue view will be loaded dynamically -->
                </div>

                <!-- LINKEDIN VIEW -->
                <div id="linkedinView" class="view-content" style="display: none;">
                    <!-- LinkedIn view will be loaded dynamically -->
                </div>
            </div>

            <!-- RIGHT SIDEBAR - LIVE UPDATES & INFO -->
            <div class="sidebar-right">
                <!-- COLLAPSIBLE LIVE UPDATES -->
                <div class="nav-section">
                    <div class="nav-title" style="color: var(--text-primary); cursor: pointer; display: flex; align-items: center; justify-content: space-between;" onclick="toggleLiveUpdates()">
                        <span><i class="fas fa-broadcast-tower" style="color: #22c55e; margin-right: 8px;"></i>Live Updates</span>
                        <i class="fas fa-chevron-down" id="liveUpdatesToggle" style="transition: transform 0.3s;"></i>
                    </div>
                    <div id="liveUpdatesContainer" style="background: var(--dark-bg); border-radius: 10px; border: 1px solid var(--dark-border); overflow: hidden; transition: max-height 0.3s ease; max-height: 500px;">
                        <div id="liveUpdatesFeed" style="max-height: 450px; overflow-y: auto; padding: 10px;">
                            <ul class="notification-list" id="activityFeed" style="list-style: none;">
                                <!-- Live updates populated by JavaScript -->
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- QUICK STATS -->
                <div class="nav-section">
                    <div class="nav-title"><i class="fas fa-bolt" style="color: #f59e0b; margin-right: 8px;"></i>Quick Stats</div>
                    <div style="padding: 15px; background: var(--dark-bg); border-radius: 10px; border: 1px solid var(--dark-border);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid var(--dark-border);">
                            <span style="color: var(--text-secondary);">Active Agents</span>
                            <span style="color: var(--text-primary); font-weight: 600;">11/20</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid var(--dark-border);">
                            <span style="color: var(--text-secondary);">Tasks Today</span>
                            <span style="color: #22c55e; font-weight: 600;">23 completed</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid var(--dark-border);">
                            <span style="color: var(--text-secondary);">Pipeline Value</span>
                            <span style="color: #3b82f6; font-weight: 600;">$45K</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-secondary);">Success Rate</span>
                            <span style="color: #f59e0b; font-weight: 600;">94%</span>
                        </div>
                    </div>
                </div>

                <!-- UPCOMING MILESTONES -->
                <div class="nav-section">
                    <div class="nav-title"><i class="fas fa-flag-checkered" style="color: #DC1625; margin-right: 8px;"></i>Upcoming</div>
                    <div style="padding: 15px; background: var(--dark-bg); border-radius: 10px; border: 1px solid var(--dark-border);">
                        <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 12px;">
                            <div style="width: 8px; height: 8px; background: #22c55e; border-radius: 50%; margin-top: 6px; flex-shrink: 0;"></div>
                            <div>
                                <div style="color: var(--text-primary); font-weight: 500; font-size: 0.9rem;">Week 1 LinkedIn Post</div>
                                <div style="color: var(--text-secondary); font-size: 0.8rem;">Today, 8:30 AM EST</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 12px;">
                            <div style="width: 8px; height: 8px; background: #3b82f6; border-radius: 50%; margin-top: 6px; flex-shrink: 0;"></div>
                            <div>
                                <div style="color: var(--text-primary); font-weight: 500; font-size: 0.9rem;">CRM Setup Complete</div>
                                <div style="color: var(--text-secondary); font-size: 0.8rem;">Feb 5, 5:00 PM</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <div style="width: 8px; height: 8px; background: #f59e0b; border-radius: 50%; margin-top: 6px; flex-shrink: 0;"></div>
                            <div>
                                <div style="color: var(--text-primary); font-weight: 500; font-size: 0.9rem;">Q1 Financial Review</div>
                                <div style="color: var(--text-secondary); font-size: 0.8rem;">Feb 10, 5:00 PM</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL FOR DOCUMENT VIEWING -->
    <div id="documentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">Document Preview</div>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="file-preview" id="modalContent">
                <!-- Document content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // TASK DATA - COMPLETE FROM ALL DASHBOARDS
        const tasks = {
            jim: [
                { id: 1, title: "Complete client management CRM system", due: "Feb 7", priority: "high", completed: false, description: "Document all existing school relationships, usage data, renewal dates" },
                { id: 2, title: "Document all existing school relationships and status", due: "Feb 7", priority: "medium", completed: false, description: "Create comprehensive database of all current and past school relationships" },
                { id: 3, title: "Identify 5 WebXR experiences for tablet adaptation", due: "Feb 7", priority: "medium", completed: false, description: "Select best experiences for tablet optimization and document adaptation requirements" }
            ],
            nick: [
                { id: 4, title: "Continue food web experience development", due: "Ongoing", priority: "high", completed: false, description: "Finish food web ecosystem experience with predator-prey relationships" },
                { id: 5, title: "Continue co-signs project", due: "Ongoing", priority: "medium", completed: false, description: "Develop co-signs experience for spatial learning" },
                { id: 6, title: "Continue restorative model project", due: "Ongoing", priority: "medium", completed: false, description: "Build restorative justice model experience" },
                { id: 7, title: "Focus on creating reusable skills from existing experiences", due: "Feb 7", priority: "high", completed: false, description: "Document existing experiences as case studies and reusable components" }
            ],
            ai: [
                { id: 8, title: "Create ROI documentation template âœ…", due: "Feb 7 | Completed", priority: "high", completed: true, description: "ROI template for school districts with metrics and calculations" },
                { id: 9, title: "Draft LinkedIn post templates", due: "Feb 7", priority: "high", completed: false, description: "Create 3 LinkedIn post templates for engagement, AI, and superintendent topics" },
                { id: 10, title: "Research EdTech conferences for Q1-Q2", due: "Feb 7", priority: "medium", completed: false, description: "Identify relevant conferences and speaking opportunities" },
                { id: 11, title: "Set up weekly progress review system", due: "Feb 7", priority: "high", completed: false, description: "Create system for tracking weekly progress and metrics" },
                { id: 12, title: "Create custom experience proposal template", due: "Feb 7", priority: "medium", completed: false, description: "Template for proposing custom WebXR experiences to prospects" }
            ],
            joint: [
                { id: 13, title: "Schedule calls with Kevin (Geo) and Anita", due: "Feb 7", priority: "high", completed: false, description: "Schedule renewal and expansion discussions with existing clients" },
                { id: 14, title: "Draft first 3 LinkedIn posts", due: "Feb 7", priority: "medium", completed: false, description: "Create final versions of 3 LinkedIn posts for Week 1" },
                { id: 15, title: "Create target list of 10 potential clients", due: "Feb 7", priority: "medium", completed: false, description: "Identify 10 prospects for custom experience projects" }
            ]
        };

        // DOCUMENT DATA
        const documents = {
            dashboard: { title: "Ascent XR DASHBOARD", content: `Complete business dashboard and action plan`, file: "ASCENT_XR_DASHBOARD.html", realPath: "ASCENT_XR_DASHBOARD.html" },
            linkedin: { title: "LINKEDIN STRATEGY", content: `Complete content strategy with 3 draft posts`, file: "ASCENT_XR_LINKEDIN_STRATEGY.html", realPath: "ASCENT_XR_LINKEDIN_STRATEGY.html" },
            roi: { title: "ROI TEMPLATE", content: `ROI documentation template for school districts`, file: "ASCENT_XR_ROI_TEMPLATE.html", realPath: "ASCENT_XR_ROI_TEMPLATE.html" },
            constitution: { title: "ASCENT CONSTITUTION", content: `Ascent XR company constitution and principles`, file: "ASCENT_ASSISTANT_CONSTITUTION.html", realPath: "ASCENT_ASSISTANT_CONSTITUTION.html" },
            nick: { title: "NICK STATUS", content: `Latest status update from Nick (CTO)`, file: "NICK_STATUS.html", realPath: "NICK_STATUS.html" },
            schedule: { title: "LINKEDIN SCHEDULE", content: `LinkedIn posting schedule and automation`, file: "LINKEDIN_SCHEDULE.html", realPath: "LINKEDIN_SCHEDULE.html" },
            docs: { title: "ALL DOCUMENTS", content: `Complete documentation hub`, file: "ascent_dashboard_docs.html", realPath: "ascent_dashboard_docs.html" },
            gallery: { title: "LINKEDIN GALLERY", content: `LinkedIn post images gallery`, file: "linkedin_gallery.html", realPath: "linkedin_gallery.html" }
        };

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            renderAllTasks();
            setupNavigation();
            updateStats();
            
            // Load initial view
            switchView('overview');
            
            // Start auto-updates
            setInterval(updateLiveData, 10000);
            setInterval(updateTime, 60000);
            setInterval(refreshIntegrations, 1000);
        });

        // Render all tasks
        function renderAllTasks() {
            // Overview board tasks
            renderTaskColumn('jimTasks', tasks.jim, 3);
            renderTaskColumn('nickTasks', tasks.nick, 4);
            renderTaskColumn('aiTasks', tasks.ai, 5);
            
            // Detailed tasks
            renderDetailedTasks('detailedJimTasks', tasks.jim);
            renderDetailedTasks('detailedNickTasks', tasks.nick);
            renderDetailedTasks('detailedAiTasks', tasks.ai);
            renderDetailedTasks('detailedJointTasks', tasks.joint);
            
            // Update counts
            document.getElementById('jimCount').textContent = tasks.jim.length;
            document.getElementById('nickCount').textContent = tasks.nick.length;
            document.getElementById('aiCount').textContent = tasks.ai.length;
        }

        function renderTaskColumn(containerId, taskList, limit = 3) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            const displayTasks = taskList.slice(0, limit);
            
            displayTasks.forEach(task => {
                const taskItem = document.createElement('div');
                taskItem.className = 'task-item fade-in';
                taskItem.innerHTML = `
                    <div class="task-checkbox ${task.completed ? 'checked' : ''}" 
                         onclick="toggleTask(${task.id}, this)">
                    </div>
                    <div class="task-content">
                        <div class="task-title">${task.title}</div>
                        <div class="task-meta">
                            <span><i class="far fa-calendar"></i> ${task.due}</span>
                            <span class="task-priority priority-${task.priority}">${task.priority}</span>
                        </div>
                    </div>
                `;
                container.appendChild(taskItem);
            });
        }

        function renderDetailedTasks(containerId, taskList) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            taskList.forEach(task => {
                const taskItem = document.createElement('div');
                taskItem.className = 'task-item fade-in';
                taskItem.innerHTML = `
                    <div class="task-checkbox ${task.completed ? 'checked' : ''}" 
                         onclick="toggleTask(${task.id}, this)">
                    </div>
                    <div class="task-content">
                        <div class="task-title">${task.title}</div>
                        <div class="task-description" style="font-size: 0.9rem; color: var(--text-secondary); margin: 5px 0; line-height: 1.4;">${task.description}</div>
                        <div class="task-meta">
                            <span><i class="far fa-calendar"></i> ${task.due}</span>
                            <span class="task-priority priority-${task.priority}">${task.priority}</span>
                            <span style="color: ${task.completed ? 'var(--success)' : 'var(--warning)'}">
                                <i class="fas fa-${task.completed ? 'check-circle' : 'clock'}"></i> ${task.completed ? 'Completed' : 'Pending'}
                            </span>
                        </div>
                    </div>
                `;
                container.appendChild(taskItem);
            });
        }

        // Toggle task completion
        function toggleTask(taskId, checkbox) {
            // Find task in all arrays
            let task = null;
            let category = null;
            
            for (const [cat, taskList] of Object.entries(tasks)) {
                const found = taskList.find(t => t.id === taskId);
                if (found) {
                    task = found;
                    category = cat;
                    break;
                }
            }
            
            if (task) {
                task.completed = !task.completed;
                checkbox.classList.toggle('checked');
                
                // Update notification
                addNotification(
                    task.completed ? 'success' : 'info',
                    task.completed ? 
                        `âœ… Task Completed: "${task.title}"` :
                        `ðŸ”„ Task Reopened: "${task.title}"`
                );
                
                updateStats();
                renderAllTasks();
            }
        }

        // Update statistics
        function updateStats() {
            // Calculate completion rate
            let totalTasks = 0;
            let completedTasks = 0;
            
            for (const taskList of Object.values(tasks)) {
                totalTasks += taskList.length;
                completedTasks += taskList.filter(t => t.completed).length;
            }
            
            const completionRate = Math.round((completedTasks / totalTasks) * 100);
            
            // Update display
            document.getElementById('taskCompletion').textContent = `${completionRate}%`;
            document.querySelector('.stat-card:nth-child(2) .stat-value').textContent = `${totalTasks}`;
            document.querySelector('.stat-card:nth-child(2) .stat-progress-bar').style.width = `${completionRate}%`;
            
            // Update progress bars
            const progressBars = document.querySelectorAll('.stat-progress-bar');
            if (progressBars[1]) {
                progressBars[1].style.width = `${completionRate}%`;
            }
        }

        // Navigation
        function setupNavigation() {
            // View navigation links
            document.querySelectorAll('.nav-link[data-view]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active state
                    document.querySelectorAll('.nav-link[data-view]').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Switch view
                    const view = this.dataset.view;
                    switchView(view);
                });
            });
            
            // Document navigation links
            document.querySelectorAll('.nav-link.document-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active state
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Load document
                    const docKey = this.dataset.doc;
                    openDocument(docKey, e);
                });
            });
        }

        function switchView(view) {
            // Clear any document viewer
            const contentArea = document.querySelector('.content-area');
            const documentViewer = contentArea.querySelector('.document-viewer');
            if (documentViewer) {
                documentViewer.remove();
            }
            
            // Hide all views
            document.querySelectorAll('.view-content').forEach(v => v.style.display = 'none');
            
            // Show selected view
            const viewElement = document.getElementById(`${view}View`);
            if (viewElement) {
                viewElement.style.display = 'block';
                
                // Load view-specific content
                switch(view) {
                    case 'documents':
                        loadDocumentsView();
                        break;
                    case 'revenue':
                        loadRevenueView();
                        break;
                    case 'linkedin':
                        loadLinkedInView();
                        break;
                }
            }
        }

        // Document viewing - Loads document directly in content area
        async function openDocument(docKey, e) {
            const doc = documents[docKey];
            if (!doc) return;
            
            // Hide current content
            const contentArea = document.querySelector('.content-area');
            contentArea.innerHTML = '';
            
            // Create document container
            const docContainer = document.createElement('div');
            docContainer.className = 'document-viewer';
            docContainer.innerHTML = `
                <div class="document-header">
                    <button class="btn btn-secondary" onclick="switchView('overview')">
                        <i class="fas fa-arrow-left"></i> Back to Dashboard
                    </button>
                    <h2 style="margin: 0; color: var(--primary);">${doc.title}</h2>
                </div>
                <div class="document-content">
                    <iframe src="${doc.file}" style="width: 100%; height: calc(100vh - 200px); border: none; border-radius: 12px;"></iframe>
                </div>
            `;
            
            contentArea.appendChild(docContainer);
            
            // Update active nav state
            if (e && e.target) {
                document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
                e.target.classList.add('active');
            }
        }

        function closeModal() {
            const modal = document.getElementById('documentModal');
            if (modal) modal.style.display = 'none';
        }

        function showModal(content) {
            const modal = document.getElementById('documentModal');
            const modalBody = document.getElementById('modalBody');
            if (modal && modalBody) {
                modalBody.innerHTML = content;
                modal.style.display = 'flex';
            }
        }

        // REAL file loading
        async function simulateFileLoad(filename) {
            try {
                // Try to fetch actual file content
                const response = await fetch(`/api/documents/${filename}`);
                
                if (response.ok) {
                    return await response.text();
                } else {
                    // Fallback: check if file exists in workspace and serve it
                    const fallbackFiles = {
                        "ASCENT_XR_DASHBOARD.html": `<iframe src="ASCENT_XR_DASHBOARD.html" style="width: 100%; height: 500px; border: none; border-radius: 8px;"></iframe>`,
                        "ASCENT_XR_LINKEDIN_STRATEGY.html": `<iframe src="ASCENT_XR_LINKEDIN_STRATEGY.html" style="width: 100%; height: 500px; border: none; border-radius: 8px;"></iframe>`,
                        "ASCENT_XR_ROI_TEMPLATE.html": `<iframe src="ASCENT_XR_ROI_TEMPLATE.html" style="width: 100%; height: 500px; border: none; border-radius: 8px;"></iframe>`,
                        "ASCENT_ASSISTANT_CONSTITUTION.html": `<iframe src="ASCENT_ASSISTANT_CONSTITUTION.html" style="width: 100%; height: 500px; border: none; border-radius: 8px;"></iframe>`,
                        "NICK_STATUS.html": `<iframe src="NICK_STATUS.html" style="width: 100%; height: 500px; border: none; border-radius: 8px;"></iframe>`,
                        "LINKEDIN_SCHEDULE.html": `<iframe src="LINKEDIN_SCHEDULE.html" style="width: 100%; height: 500px; border: none; border-radius: 8px;"></iframe>`,
                        "ascent_dashboard_docs.html": `<iframe src="ascent_dashboard_docs.html" style="width: 100%; height: 500px; border: none; border-radius: 8px;"></iframe>`,
                        "linkedin_gallery.html": `<iframe src="linkedin_gallery.html" style="width: 100%; height: 500px; border: none; border-radius: 8px;"></iframe>`
                    };
                    
                    if (fallbackFiles[filename]) {
                        return fallbackFiles[filename];
                    } else {
                        return `File "${filename}" not found.\n\nAvailable HTML documents:\n- ASCENT_XR_DASHBOARD.html\n- ASCENT_XR_LINKEDIN_STRATEGY.html\n- ASCENT_XR_ROI_TEMPLATE.html\n- ASCENT_ASSISTANT_CONSTITUTION.html\n- NICK_STATUS.html\n- LINKEDIN_SCHEDULE.html\n- ascent_dashboard_docs.html\n- linkedin_gallery.html\n\n**Note:** All documents are now available as HTML files with working links.`;
                    }
                }
            } catch (error) {
                return `Error loading ${filename}: ${error.message}\n\nThis dashboard is running locally. To access actual files, we need:\n1. Backend API server\n2. File serving endpoint\n3. Authentication system`;
            }
        }

        // View loading functions
        function loadDocumentsView() {
            const container = document.getElementById('documentsView');
            container.innerHTML = `
                <div class="section">
                    <div class="section-header">
                        <div class="section-title"><i class="fas fa-folder-open"></i> All Documentation</div>
                        <div class="section-actions">
                            <button class="btn" onclick="exportAllDocs()"><i class="fas fa-download"></i> Export All</button>
                            <button class="btn btn-secondary" onclick="refreshDocs()"><i class="fas fa-sync"></i> Refresh</button>
                        </div>
                    </div>
                    <div class="docs-grid">
                        ${Object.entries(documents).map(([key, doc]) => `
                            <div class="doc-card" onclick="openDocument('${key}')">
                                <div class="doc-title"><i class="fas fa-file-alt"></i> ${doc.title}</div>
                                <div class="doc-description">Click to view full document content and details.</div>
                                <div class="doc-meta">
                                    <span><i class="fas fa-file"></i> ${doc.file}</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function loadRevenueView() {
            const container = document.getElementById('revenueView');
            container.innerHTML = `
                <div class="section">
                    <div class="section-header">
                        <div class="section-title"><i class="fas fa-chart-line"></i> Revenue Pipeline</div>
                        <div class="section-actions">
                            <button class="btn" onclick="updatePipeline()"><i class="fas fa-sync"></i> Update</button>
                            <button class="btn btn-secondary" onclick="exportPipeline()"><i class="fas fa-file-export"></i> Export</button>
                        </div>
                    </div>
                    <div class="info-grid">
                        <div class="info-card">
                            <div class="info-card-header">
                                <i class="fas fa-school" style="color: var(--primary);"></i>
                                <div class="info-card-title">Track 1: District Licensing</div>
                            </div>
                            <div style="margin-top: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span>Target:</span>
                                    <span style="color: var(--primary); font-weight: 600;">5-10 districts by June</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span>Revenue Potential:</span>
                                    <span style="color: var(--success); font-weight: 600;">$48K-$150K</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Status:</span>
                                    <span style="color: var(--warning);">Planning phase</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="info-card">
                            <div class="info-card-header">
                                <i class="fas fa-cube" style="color: var(--secondary);"></i>
                                <div class="info-card-title">Track 2: Custom Experiences</div>
                            </div>
                            <div style="margin-top: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span>Target:</span>
                                    <span style="color: var(--primary); font-weight: 600;">5-10 projects by June</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span>Revenue Potential:</span>
                                    <span style="color: var(--success); font-weight: 600;">$25K-$75K</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Status:</span>
                                    <span style="color: var(--warning);">Prospect identification</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="info-card">
                            <div class="info-card-header">
                                <i class="fas fa-robot" style="color: var(--danger);"></i>
                                <div class="info-card-title">Track 3: AI Lesson Generation</div>
                            </div>
                            <div style="margin-top: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span>Target:</span>
                                    <span style="color: var(--primary); font-weight: 600;">Launch pilot in March</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                    <span>Revenue Potential:</span>
                                    <span style="color: var(--success); font-weight: 600;">$15K-$50K</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Status:</span>
                                    <span style="color: var(--warning);">Development planning</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function loadLinkedInView() {
            const container = document.getElementById('linkedinView');
            container.innerHTML = `
                <div class="section">
                    <div class="section-header">
                        <div class="section-title"><i class="fab fa-linkedin"></i> LinkedIn Strategy - Week 1</div>
                        <div class="section-actions">
                            <a href="linkedin_gallery.html" target="_blank" class="btn" style="color: white; text-decoration: none;"><i class="fas fa-eye"></i> View Gallery</a>
                            <button class="btn" onclick="postToLinkedIn()"><i class="fas fa-paper-plane"></i> Schedule Posts</button>
                            <button class="btn btn-secondary" onclick="openDocument('schedule')"><i class="fas fa-calendar"></i> View Schedule</button>
                        </div>
                    </div>
                    
                    <!-- EMBEDDED LINKEDIN GALLERY IFRAME -->
                    <div class="info-card" style="grid-column: 1 / -1; padding: 0; overflow: hidden;">
                        <iframe src="/dev/linkedin_gallery.html" style="width: 100%; height: 400px; border: none; border-radius: 12px;"></iframe>
                        <div style="padding: 15px; border-top: 1px solid var(--dark-border);">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <strong>Ready for Launch:</strong> 3 posts with images uploaded
                                </div>
                                <div>
                                    <a href="linkedin_gallery.html" target="_blank" style="color: var(--primary); text-decoration: none; font-weight: 600;">
                                        Open Full Gallery â†’
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- QUICK STATS -->
                    <div class="info-grid" style="margin-top: 20px;">
                            <div class="info-card-header">
                                <i class="fas fa-video" style="color: var(--primary);"></i>
                                <div class="info-card-title">Post 1: The Engagement Gap</div>
                            </div>
                            <div style="margin-top: 15px;">
                                <div style="margin-bottom: 10px; font-weight: 600; color: var(--text-primary);">Monday, Feb 3 â€¢ 8:30 AM EST</div>
                                <div style="color: var(--text-secondary); margin-bottom: 15px; line-height: 1.5;">
                                    Traditional worksheets vs. immersive experiences - which would your students choose? We're seeing 300%+ engagement increases...
                                </div>
                                <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                                    <span style="background: var(--dark-border); padding: 3px 8px; border-radius: 12px; font-size: 0.8rem;">#EdTech</span>
                                    <span style="background: var(--dark-border); padding: 3px 8px; border-radius: 12px; font-size: 0.8rem;">#K12</span>
                                    <span style="background: var(--dark-border); padding: 3px 8px; border-radius: 12px; font-size: 0.8rem;">#SpatialLearning</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="info-card">
                            <div class="info-card-header">
                                <i class="fas fa-image" style="color: var(--secondary);"></i>
                                <div class="info-card-title">Post 2: AI + Spatial Learning</div>
                            </div>
                            <div style="margin-top: 15px;">
                                <div style="margin-bottom: 10px; font-weight: 600; color: var(--text-primary);">Wednesday, Feb 5 â€¢ 11:30 AM EST</div>
                                <div style="color: var(--text-secondary); margin-bottom: 15px; line-height: 1.5;">
                                    Teachers spend 7+ hours weekly creating supplemental materials. What if AI could generate immersive lessons in minutes?
                                </div>
                                <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                                    <span style="background: var(--dark-border); padding: 3px 8px; border-radius: 12px; font-size: 0.8rem;">#AI</span>
                                    <span style="background: var(--dark-border); padding: 3px 8px; border-radius: 12px; font-size: 0.8rem;">#EdTech</span>
                                    <span style="background: var(--dark-border); padding: 3px 8px; border-radius: 12px; font-size: 0.8rem;">#TeacherTools</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="info-card">
                            <div class="info-card-header">
                                <i class="fas fa-chart-bar" style="color: var(--success);"></i>
                                <div class="info-card-title">Post 3: Superintendent's Dilemma</div>
                            </div>
                            <div style="margin-top: 15px;">
                                <div style="margin-bottom: 10px; font-weight: 600; color: var(--text-primary);">Friday, Feb 7 â€¢ 3:30 PM EST</div>
                                <div style="color: var(--text-secondary); margin-bottom: 15px; line-height: 1.5;">
                                    To my 250+ superintendent connections: You're constantly balancing innovation with budget constraints...
                                </div>
                                <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                                    <span style="background: var(--dark-border); padding: 3px 8px; border-radius: 12px; font-size: 0.8rem;">#Leadership</span>
                                    <span style="background: var(--dark-border); padding: 3px 8px; border-radius: 12px; font-size: 0.8rem;">#K12Leadership</span>
                                    <span style="background: var(--dark-border); padding: 3px 8px; border-radius: 12px; font-size: 0.8rem;">#SchoolAdministration</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Time tracking
        let timerInterval;
        let timerSeconds = 0;
        
        function startTimer() {
            const entry = document.getElementById('timeEntry').value;
            if (!entry) {
                alert('Please enter what you\'re working on');
                return;
            }
            
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            timerSeconds = 0;
            timerInterval = setInterval(() => {
                timerSeconds++;
                document.querySelector('.btn i.fa-play').className = 'fas fa-stop';
            }, 1000);
            
            addNotification('info', `â±ï¸ Started timer for: "${entry}"`);
        }
        
        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                const hours = (timerSeconds / 3600).toFixed(1);
                const entry = document.getElementById('timeEntry').value;
                
                if (hours > 0) {
                    const timeLog = document.querySelector('.time-log');
                    const logItem = document.createElement('div');
                    logItem.className = 'time-log-item';
                    logItem.innerHTML = `<span>${entry}</span><span>${hours}h</span>`;
                    timeLog.prepend(logItem);
                    
                    document.getElementById('timeEntry').value = '';
                    document.querySelector('.btn i.fa-stop').className = 'fas fa-play';
                    
                    addNotification('success', `âœ… Logged ${hours} hours for: "${entry}"`);
                }
            }
        }

        // Notification system
        function addNotification(type, message) {
            const notificationList = document.querySelector('.notification-list');
            const notificationItem = document.createElement('li');
            notificationItem.className = `notification-item ${type}`;
            notificationItem.innerHTML = `
                <strong>${message}</strong>
                <div class="activity-time">Just now</div>
            `;
            
            notificationList.prepend(notificationItem);
            
            // Limit to 4 notifications
            if (notificationList.children.length > 4) {
                notificationList.removeChild(notificationList.lastChild);
            }
        }

        // Quick action functions
        function sendUpdate(recipient) {
            const message = prompt(`Enter update to send to ${recipient}:`);
            if (message) {
                addNotification('info', `ðŸ“¤ Update sent to ${recipient}: "${message}"`);
            }
        }
        
        function exportReport() {
            addNotification('success', 'ðŸ“Š Weekly report exported successfully');
        }
        
        function scheduleMeeting() {
            const date = prompt('Enter meeting date and time (e.g., Feb 5 2:00 PM):');
            if (date) {
                addNotification('success', `ðŸ“… Meeting scheduled for ${date}`);
            }
        }
        
        function markTaskComplete() {
            const taskId = prompt('Enter task ID to mark complete:');
            if (taskId) {
                // Find and mark task
                for (const taskList of Object.values(tasks)) {
                    const task = taskList.find(t => t.id == taskId);
                    if (task) {
                        task.completed = true;
                        addNotification('success', `âœ… Marked task ${taskId} as complete`);
                        updateStats();
                        renderAllTasks();
                        return;
                    }
                }
                addNotification('warning', `âš ï¸ Task ${taskId} not found`);
            }
        }
        
        function exportAllDocs() {
            addNotification('success', 'ðŸ“š All documents exported as ZIP file');
        }
        
        function postToLinkedIn() {
            addNotification('success', 'ðŸ“± LinkedIn posts scheduled successfully');
        }

        // Integration Functions
        function refreshIntegrations() {
            const countdownElement = document.getElementById('linkedinCountdown');
            if (countdownElement) {
                // Feb 3, 8:30 AM EST = 13:30 UTC
                const postTime = new Date('2026-02-03T13:30:00Z');
                const now = new Date();
                const diff = postTime - now;
                
                if (diff > 0) {
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                    
                    if (days > 0) {
                        countdownElement.textContent = `${days}d ${hours}h ${minutes}m`;
                    } else {
                        countdownElement.textContent = `${hours}h ${minutes}m ${seconds}s`;
                    }
                } else {
                    countdownElement.textContent = 'LIVE NOW!';
                    countdownElement.style.color = 'var(--success)';
                }
            }
            
            // Update CRM status
            const crmStatus = document.querySelector('.integration-card.crm .integration-status');
            if (crmStatus) {
                crmStatus.textContent = 'CONNECTED';
                crmStatus.className = 'integration-status success';
            }
            
            // Update agent count
            const agentCount = document.querySelector('.integration-card.agents .stat-item:nth-child(1) .stat-value');
            if (agentCount) {
                agentCount.textContent = '14';
            }
            
            // Update image preview if modal exists
            const modalImages = document.querySelectorAll('.post-preview-image');
            if (modalImages.length > 0) {
                updateImagePreviews();
            }
        }
        
        function previewLinkedInPosts() {
            const modal = document.createElement('div');
            modal.style.position = 'fixed';
            modal.style.top = '0';
            modal.style.left = '0';
            modal.style.width = '100%';
            modal.style.height = '100%';
            modal.style.backgroundColor = 'rgba(0,0,0,0.8)';
            modal.style.zIndex = '10000';
            modal.style.display = 'flex';
            modal.style.alignItems = 'center';
            modal.style.justifyContent = 'center';
            
            modal.innerHTML = `
                <div style="background: var(--dark-card); padding: 30px; border-radius: 20px; max-width: 500px; width: 90%;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 style="color: var(--primary);">LinkedIn Posts Preview</h3>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; color: var(--text-secondary); font-size: 1.5rem; cursor: pointer;">Ã—</button>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: var(--text-primary); margin-bottom: 10px;">Post 1: The Engagement Gap</h4>
                        <div style="background: var(--dark-bg); padding: 15px; border-radius: 10px; margin-bottom: 10px;">
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Feb 3, 8:30 AM EST</div>
                            <div style="color: var(--text-primary); margin: 10px 0;">Traditional learning vs spatial learning - which engages students more?</div>
                            <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                                <span style="background: rgba(37, 99, 235, 0.2); color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">#EdTech</span>
                                <span style="background: rgba(37, 99, 235, 0.2); color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">#K12</span>
                                <span style="background: rgba(37, 99, 235, 0.2); color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">#SpatialLearning</span>
                            </div>
                        </div>
                        
                        <h4 style="color: var(--text-primary); margin-bottom: 10px;">Post 2: AI + Spatial Learning</h4>
                        <div style="background: var(--dark-bg); padding: 15px; border-radius: 10px; margin-bottom: 10px;">
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Feb 5, 11:30 AM EST</div>
                            <div style="color: var(--text-primary); margin: 10px 0;">AI generating 3D educational content - saving teachers hours of prep time.</div>
                            <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                                <span style="background: rgba(37, 99, 235, 0.2); color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">#AI</span>
                                <span style="background: rgba(37, 99, 235, 0.2); color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">#EdTech</span>
                                <span style="background: rgba(37, 99, 235, 0.2); color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">#TeacherTools</span>
                            </div>
                        </div>
                        
                        <h4 style="color: var(--text-primary); margin-bottom: 10px;">Post 3: Superintendent's Dilemma</h4>
                        <div style="background: var(--dark-bg); padding: 15px; border-radius: 10px;">
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Feb 7, 3:30 PM EST</div>
                            <div style="color: var(--text-primary); margin: 10px 0;">ROI framework for superintendents - 4 quadrants of measurable impact.</div>
                            <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                                <span style="background: rgba(37, 99, 235, 0.2); color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">#Leadership</span>
                                <span style="background: rgba(37, 99, 235, 0.2); color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">#K12Leadership</span>
                                <span style="background: rgba(37, 99, 235, 0.2); color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 0.8rem;">#EdTech</span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center;">
                        <button onclick="postToLinkedIn()" style="background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 600;">Schedule All Posts</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function testCRMConnection() {
            const statusElement = document.querySelector('.integration-card.crm .integration-status');
            if (statusElement) {
                statusElement.textContent = 'TESTING...';
                statusElement.className = 'integration-status info';
                
                setTimeout(() => {
                    statusElement.textContent = 'CONNECTED';
                    statusElement.className = 'integration-status success';
                    
                    // Show success notification
                    const notification = document.createElement('div');
                    notification.style.position = 'fixed';
                    notification.style.top = '20px';
                    notification.style.right = '20px';
                    notification.style.backgroundColor = 'var(--success)';
                    notification.style.color = 'white';
                    notification.style.padding = '15px';
                    notification.style.borderRadius = '8px';
                    notification.style.zIndex = '10000';
                    notification.textContent = 'âœ… CRM connection successful!';
                    document.body.appendChild(notification);
                    
                    setTimeout(() => {
                        notification.remove();
                    }, 3000);
                }, 1500);
            }
        }
        
        function viewAgentRegistry() {
            const modal = document.createElement('div');
            modal.style.position = 'fixed';
            modal.style.top = '0';
            modal.style.left = '0';
            modal.style.width = '100%';
            modal.style.height = '100%';
            modal.style.backgroundColor = 'rgba(0,0,0,0.8)';
            modal.style.zIndex = '10000';
            modal.style.display = 'flex';
            modal.style.alignItems = 'center';
            modal.style.justifyContent = 'center';
            
            modal.innerHTML = `
                <div style="background: var(--dark-card); padding: 30px; border-radius: 20px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 style="color: var(--primary);">Agent Team Registry</h3>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; color: var(--text-secondary); font-size: 1.5rem; cursor: pointer;">Ã—</button>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px;">
                        <div style="background: var(--dark-bg); padding: 15px; border-radius: 10px;">
                            <div style="font-weight: 600; color: var(--primary); margin-bottom: 5px;">Main Agent</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Coordination & Project Management</div>
                            <div style="margin-top: 10px; color: var(--success); font-size: 0.85rem;">âœ… Active</div>
                        </div>
                        
                        <div style="background: var(--dark-bg); padding: 15px; border-radius: 10px;">
                            <div style="font-weight: 600; color: var(--primary); margin-bottom: 5px;">LinkedIn Execution</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Content Creation & Scheduling</div>
                            <div style="margin-top: 10px; color: var(--success); font-size: 0.85rem;">âœ… Completed Week 1</div>
                        </div>
                        
                        <div style="background: var(--dark-bg); padding: 15px; border-radius: 10px;">
                            <div style="font-weight: 600; color: var(--primary); margin-bottom: 5px;">CRM Development</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">School Relationship Management</div>
                            <div style="margin-top: 10px; color: var(--success); font-size: 0.85rem;">âœ… Interface Built</div>
                        </div>
                        
                        <div style="background: var(--dark-bg); padding: 15px; border-radius: 10px;">
                            <div style="font-weight: 600; color: var(--primary); margin-bottom: 5px;">Branding & Design</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Visual Assets & Consistency</div>
                            <div style="margin-top: 10px; color: var(--success); font-size: 0.85rem;">âœ… Style Guide Complete</div>
                        </div>
                        
                        <div style="background: var(--dark-bg); padding: 15px; border-radius: 10px;">
                            <div style="font-weight: 600; color: var(--primary); margin-bottom: 5px;">AI Content Generation</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Blogs, Case Studies, Social Media</div>
                            <div style="margin-top: 10px; color: var(--success); font-size: 0.85rem;">âœ… Templates Ready</div>
                        </div>
                        
                        <div style="background: var(--dark-bg); padding: 15px; border-radius: 10px;">
                            <div style="font-weight: 600; color: var(--primary); margin-bottom: 5px;">Analytics & Reporting</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Performance Tracking & Metrics</div>
                            <div style="margin-top: 10px; color: var(--success); font-size: 0.85rem;">âœ… System Created</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; color: var(--text-muted); font-size: 0.9rem;">
                        14 total agents | Last updated: Just now
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function testVoiceInterface() {
            // Create voice test interface
            const modal = document.createElement('div');
            modal.style.position = 'fixed';
            modal.style.top = '0';
            modal.style.left = '0';
            modal.style.width = '100%';
            modal.style.height = '100%';
            modal.style.backgroundColor = 'rgba(0,0,0,0.8)';
            modal.style.zIndex = '10000';
            modal.style.display = 'flex';
            modal.style.alignItems = 'center';
            modal.style.justifyContent = 'center';
            
            modal.innerHTML = `
                <div style="background: var(--dark-card); padding: 30px; border-radius: 20px; max-width: 400px; width: 90%; text-align: center;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 style="color: #132e5e;">Samantha Voice Test</h3>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; color: var(--text-secondary); font-size: 1.5rem; cursor: pointer;">Ã—</button>
                    </div>
                    
                    <div style="color: var(--text-secondary); margin-bottom: 30px;">
                        <i class="fas fa-microphone" style="font-size: 3rem; color: #132e5e; margin-bottom: 20px;"></i>
                        <p>Samantha voice interface <span style="color: #ff6b00;">âœ… Demo Active</span></p>
                        <p style="font-size: 0.9rem; margin-top: 10px;">Voice demo shows interface. TTS available via OpenClaw when connected.</p>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button onclick="playTestMessage('Welcome to Ascent XR! I\\'m Samantha, your magical assistant.')" style="background: #132e5e; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Test Greeting</button>
                        <button onclick="playTestMessage('Your LinkedIn posts are ready for Monday launch! Three images generated, scheduling complete.')" style="background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Test Update</button>
                    </div>
                    <div style="margin-top: 15px; padding: 10px; background: rgba(14, 165, 233, 0.1); border-radius: 8px; font-size: 0.85rem;">
                        <i class="fas fa-info-circle" style="color: #132e5e; margin-right: 5px;"></i>
                        <strong>Note:</strong> Voice demo shows interface. Actual TTS requires OpenClaw connection.
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Function to play test message
            window.playTestMessage = function(text) {
                const ttsEvent = new CustomEvent('ttsRequest', { detail: { text: text } });
                window.dispatchEvent(ttsEvent);
                
                const messageDiv = document.createElement('div');
                messageDiv.style.position = 'fixed';
                messageDiv.style.bottom = '20px';
                messageDiv.style.left = '50%';
                messageDiv.style.transform = 'translateX(-50%)';
                messageDiv.style.backgroundColor = 'var(--primary)';
                messageDiv.style.color = 'white';
                messageDiv.style.padding = '10px 20px';
                messageDiv.style.borderRadius = '8px';
                messageDiv.style.zIndex = '10001';
                messageDiv.textContent = 'Playing: ' + text.substring(0, 50) + '...';
                document.body.appendChild(messageDiv);
                
                setTimeout(() => {
                    messageDiv.remove();
                }, 3000);
            };
        }

        // Live data updates
        function updateLiveData() {
            // Randomly update pipeline value (simulation)
            const pipelineValue = document.getElementById('revenuePipeline');
            const currentValue = parseInt(pipelineValue.textContent.replace('$', '').replace('K', ''));
            const newValue = currentValue + (Math.random() > 0.9 ? 5 : 0);
            if (newValue !== currentValue && newValue <= 300) {
                pipelineValue.textContent = `$${newValue}K`;
                pipelineValue.style.color = 'var(--success)';
                setTimeout(() => {
                    pipelineValue.style.color = '';
                }, 1000);
                
                // Update progress bar
                const progress = Math.min(100, (newValue / 300) * 100);
                document.querySelector('.stat-card:nth-child(1) .stat-progress-bar').style.width = `${progress}%`;
            }
            
            // Update days remaining
            const targetDate = new Date('2026-06-30');
            const today = new Date();
            const daysRemaining = Math.ceil((targetDate - today) / (1000 * 60 * 60 * 24));
            document.getElementById('daysRemaining').textContent = daysRemaining;
        }

        function updateTime() {
            const now = new Date();
            const subtitle = document.querySelector('.header .subtitle');
            if (subtitle) {
                subtitle.textContent = `All Documentation â€¢ Last updated: ${now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;
            }
        }

        // Utility functions
        function addNewTask() {
            const title = prompt('Enter new task title:');
            if (title) {
                const owner = prompt('Task owner (jim/nick/ai/joint):');
                const due = prompt('Due date (e.g., Feb 7):');
                const priority = prompt('Priority (high/medium/low):');
                const description = prompt('Task description:');
                
                if (owner && tasks[owner]) {
                    const newId = Math.max(...Object.values(tasks).flat().map(t => t.id)) + 1;
                    tasks[owner].push({
                        id: newId,
                        title,
                        due: due || 'Feb 7',
                        priority: priority || 'medium',
                        completed: false,
                        description: description || title
                    });
                    
                    addNotification('success', `âœ… Added new task: "${title}"`);
                    updateStats();
                    renderAllTasks();
                }
            }
        }
        
        function markAllComplete() {
            if (confirm('Mark all tasks as complete?')) {
                for (const taskList of Object.values(tasks)) {
                    taskList.forEach(task => task.completed = true);
                }
                addNotification('success', 'âœ… All tasks marked as complete');
                updateStats();
                renderAllTasks();
            }
        }

        // Chart.js dark mode defaults
        Chart.defaults.color = '#e2e8f0';
        Chart.defaults.borderColor = '#334155';
    </script>
    
    <!-- AGENT COORDINATION SYSTEM -->
    <script>
    // Agent Coordination System v2.0
    const AGENT_REGISTRY_URL = 'agent_registry.json';
    let agentData = null;
    let taskQueue = [];
    let coordinationMetrics = {};
    
    // Load agent registry from JSON
    async function loadAgentRegistry() {
        try {
            const response = await fetch(AGENT_REGISTRY_URL + '?t=' + Date.now());
            if (!response.ok) throw new Error('Failed to load agent registry');
            agentData = await response.json();
            console.log('âœ… Agent registry loaded:', agentData.agents.length, 'agents');
            updateAgentDashboard();
            return agentData;
        } catch (error) {
            console.warn('âš ï¸ Using cached agent data:', error);
            // Fallback to embedded data
            agentData = getEmbeddedAgentData();
            updateAgentDashboard();
            return agentData;
        }
    }
    
    // Embedded agent data as fallback
    function getEmbeddedAgentData() {
        return {
            agents: [
                { id: 'main', name: 'Main Agent', specialization: 'Coordination & Project Management', current_status: 'active', availability: 'high', tasks_completed: 47, tasks_pending: 3, success_rate: 94 },
                { id: 'content_creator', name: 'LinkedIn Execution Agent', specialization: 'Content & Social Media', current_status: 'active', availability: 'high', tasks_completed: 23, tasks_pending: 2, success_rate: 91 },
                { id: 'designer', name: 'Branding & Design Agent', specialization: 'Visual Assets & UI/UX', current_status: 'active', availability: 'medium', tasks_completed: 19, tasks_pending: 1, success_rate: 96 },
                { id: 'developer', name: 'CRM Development Agent', specialization: 'Web Development & Integration', current_status: 'active', availability: 'high', tasks_completed: 31, tasks_pending: 4, success_rate: 92 },
                { id: 'ai_content', name: 'AI Content Generation Agent', specialization: 'Long-form Content & Research', current_status: 'available', availability: 'high', tasks_completed: 28, tasks_pending: 0, success_rate: 89 },
                { id: 'analytics', name: 'Analytics & Reporting Agent', specialization: 'Data Analysis & KPIs', current_status: 'available', availability: 'medium', tasks_completed: 15, tasks_pending: 0, success_rate: 95 },
                { id: 'market_research', name: 'Market Research Agent', specialization: 'Competitor & Trend Analysis', current_status: 'available', availability: 'medium', tasks_completed: 12, tasks_pending: 0, success_rate: 88 },
                { id: 'proposal_contract', name: 'Proposal & Contract Agent', specialization: 'Documentation & Legal', current_status: 'available', availability: 'medium', tasks_completed: 8, tasks_pending: 0, success_rate: 93 },
                { id: 'email_automation', name: 'Email Automation Agent', specialization: 'Campaigns & Workflows', current_status: 'active', availability: 'high', tasks_completed: 17, tasks_pending: 2, success_rate: 90 },
                { id: 'coordination_system', name: 'Agent Coordination System', specialization: 'Task Routing & Load Balancing', current_status: 'active', availability: 'high', tasks_completed: 156, tasks_pending: 8, success_rate: 97 },
                { id: 'communication_protocol', name: 'Agent Communication Protocol', specialization: 'Inter-agent Messaging', current_status: 'active', availability: 'high', tasks_completed: 203, tasks_pending: 12, success_rate: 99 },
                { id: 'dashboard_enhancement', name: 'Dashboard Enhancement Agent', specialization: 'UI/UX Improvements', current_status: 'active', availability: 'medium', tasks_completed: 22, tasks_pending: 3, success_rate: 91 },
                { id: 'graphic_design', name: 'Graphic Design Agent', specialization: 'Visual Content & Graphics', current_status: 'available', availability: 'high', tasks_completed: 34, tasks_pending: 0, success_rate: 94 },
                { id: 'slack_troubleshooter', name: 'Slack Upload Troubleshooter', specialization: 'Integration Debugging', current_status: 'available', availability: 'low', tasks_completed: 7, tasks_pending: 0, success_rate: 86 },
                { id: 'sdr_agent', name: 'SDR Agent', specialization: 'LinkedIn Prospecting & Lead Qualification', current_status: 'available', availability: 'high', tasks_completed: 0, tasks_pending: 0, success_rate: 0 },
                { id: 'crm_sales_agent', name: 'CRM & Sales Pipeline Agent', specialization: 'Pipeline Management & Deal Tracking', current_status: 'available', availability: 'high', tasks_completed: 0, tasks_pending: 0, success_rate: 0 },
                { id: 'financial_agent', name: 'Financial Agent (CPA)', specialization: 'Tax Strategy, Budgeting & Forecasting', current_status: 'available', availability: 'high', tasks_completed: 0, tasks_pending: 0, success_rate: 0 }
            ],
            coordination_metrics: {
                total_agents: 17,
                active_now: 8,
                available: 6,
                busy: 5,
                offline: 0,
                avg_success_rate: 92.3,
                tasks_completed_today: 23,
                tasks_pending: 25
            }
        };
    }
    
    // Update agent dashboard with real data
    function updateAgentDashboard() {
        if (!agentData) return;
        
        const metrics = agentData.coordination_metrics || getEmbeddedAgentData().coordination_metrics;
        
        // Update stat cards
        updateStatValue('totalAgents', metrics.total_agents);
        updateStatValue('activeAgents', metrics.active_now);
        updateStatValue('completedAgents', metrics.total_agents - metrics.busy);
        updateStatValue('completionRate', Math.round(metrics.avg_success_rate) + '%');
        
        // Update progress bars
        const completionBar = document.getElementById('overallCompletionBar');
        if (completionBar) {
            completionBar.style.width = metrics.avg_success_rate + '%';
        }
        
        // Update agent cards
        updateAgentCards();
        
        console.log('ðŸ“Š Agent dashboard updated');
    }
    
    // Update a specific stat value with animation
    function updateStatValue(elementId, value) {
        const element = document.getElementById(elementId);
        if (element) {
            element.style.opacity = '0';
            setTimeout(() => {
                element.textContent = value;
                element.style.opacity = '1';
            }, 200);
        }
    }
    
    // Update agent integration cards
    function updateAgentCards() {
        if (!agentData || !agentData.agents) return;
        
        // Update the agents card in integrations grid
        const activeCount = agentData.agents.filter(a => a.current_status === 'active').length;
        const availableCount = agentData.agents.filter(a => a.current_status === 'available').length;
        
        const activeCountEl = document.getElementById('activeAgentCount');
        const totalCountEl = document.getElementById('totalAgentCount');
        
        if (activeCountEl) activeCountEl.textContent = activeCount;
        if (totalCountEl) totalCountEl.textContent = availableCount;
        
        // Render agent cards into registry container
        renderAgentRegistryCards();
    }
    
    // Render agent cards into the registry container
    function renderAgentRegistryCards() {
        const container = document.getElementById('agentRegistry');
        if (!container || !agentData || !agentData.agents) return;
        
        const statusColors = {
            active: '#22c55e',
            available: '#3b82f6',
            busy: '#f59e0b',
            offline: '#6b7280'
        };
        
        const availabilityColors = {
            high: '#22c55e',
            medium: '#f59e0b',
            low: '#ef4444'
        };
        
        container.innerHTML = agentData.agents.map(agent => `
            <div class="agent-card" data-agent-id="${agent.id}" style="
                background: var(--dark-card);
                border: 1px solid var(--dark-border);
                border-radius: 12px;
                padding: 20px;
                margin-bottom: 15px;
                transition: all 0.2s ease;
                cursor: pointer;
            " onmouseover="this.style.borderColor='var(--primary)'" onmouseout="this.style.borderColor='var(--dark-border)'">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                    <div>
                        <div style="font-weight: 600; font-size: 1.1rem; color: var(--text-primary); margin-bottom: 4px;">
                            ${agent.name}
                        </div>
                        <div style="font-size: 0.9rem; color: var(--text-secondary);">
                            ${agent.specialization}
                        </div>
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <span style="
                            background: ${statusColors[agent.current_status] || '#6b7280'}20;
                            color: ${statusColors[agent.current_status] || '#6b7280'};
                            padding: 4px 12px;
                            border-radius: 20px;
                            font-size: 0.8rem;
                            font-weight: 500;
                            text-transform: uppercase;
                        ">${agent.current_status}</span>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--dark-border);">
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 4px;">Availability</div>
                        <div style="display: flex; align-items: center; gap: 6px;">
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: ${availabilityColors[agent.availability] || '#6b7280'};"></div>
                            <span style="font-weight: 500; color: var(--text-primary); text-transform: capitalize;">${agent.availability}</span>
                        </div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 4px;">Tasks Pending</div>
                        <div style="font-weight: 600; color: var(--text-primary);">${agent.tasks_pending || 0}</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-bottom: 4px;">Success Rate</div>
                        <div style="font-weight: 600; color: ${agent.success_rate >= 90 ? '#22c55e' : agent.success_rate >= 70 ? '#f59e0b' : '#ef4444'};">
                            ${agent.success_rate}%
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 12px; display: flex; justify-content: space-between; align-items: center;">
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <i class="fas fa-check-circle" style="color: var(--success); margin-right: 5px;"></i>
                        ${agent.tasks_completed || 0} tasks completed
                    </div>
                    <button onclick="viewAgentDetails('${agent.id}')" style="
                        background: transparent;
                        border: 1px solid var(--primary);
                        color: var(--primary);
                        padding: 6px 14px;
                        border-radius: 6px;
                        font-size: 0.85rem;
                        cursor: pointer;
                        transition: all 0.2s ease;
                    " onmouseover="this.style.background='var(--primary)'; this.style.color='white'" onmouseout="this.style.background='transparent'; this.style.color='var(--primary)'">
                        View Details
                    </button>
                </div>
            </div>
        `).join('');
    }
    
    // View agent details
    function viewAgentDetails(agentId) {
        const agent = agentData?.agents?.find(a => a.id === agentId);
        if (!agent) return;
        
        // Create modal content
        const modalContent = `
            <div style="max-width: 600px;">
                <h2 style="margin-bottom: 20px; color: var(--text-primary);">${agent.name}</h2>
                <div style="margin-bottom: 20px;">
                    <strong>Specialization:</strong> ${agent.specialization}
                </div>
                <div style="margin-bottom: 20px;">
                    <strong>Status:</strong> <span style="text-transform: capitalize;">${agent.current_status}</span>
                </div>
                <div style="margin-bottom: 20px;">
                    <strong>Availability:</strong> <span style="text-transform: capitalize;">${agent.availability}</span>
                </div>
                <div style="margin-bottom: 20px;">
                    <strong>Tasks Completed:</strong> ${agent.tasks_completed || 0}
                </div>
                <div style="margin-bottom: 20px;">
                    <strong>Tasks Pending:</strong> ${agent.tasks_pending || 0}
                </div>
                <div style="margin-bottom: 20px;">
                    <strong>Success Rate:</strong> ${agent.success_rate}%
                </div>
                <div style="margin-bottom: 20px;">
                    <strong>Contact Method:</strong> ${agent.contact_method || 'Session-based'}
                </div>
                <div style="margin-top: 30px; display: flex; gap: 10px;">
                    <button onclick="assignTaskToAgent('${agent.id}')" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Assign Task
                    </button>
                    <button onclick="closeModal()" class="btn btn-secondary">
                        Close
                    </button>
                </div>
            </div>
        `;
        
        showModal(modalContent);
    }
    
    // Assign task to specific agent
    function assignTaskToAgent(agentId) {
        const title = prompt('Enter task title:');
        if (!title) return;
        
        const description = prompt('Enter task description:');
        const priority = prompt('Priority (critical/high/medium/low):', 'medium');
        
        const task = {
            title: title,
            description: description || '',
            priority: priority || 'medium'
        };
        
        const result = assignTask(agentId, task);
        if (result) {
            closeModal();
            renderAgentRegistryCards();
        }
    }
    
    // Task Assignment System
    function assignTask(agentId, task) {
        const agent = agentData?.agents?.find(a => a.id === agentId);
        if (!agent) {
            console.error('âŒ Agent not found:', agentId);
            return false;
        }
        
        if (agent.current_status === 'offline' || agent.availability === 'low') {
            console.warn('âš ï¸ Agent unavailable:', agent.name);
            return false;
        }
        
        const taskAssignment = {
            task_id: 'TASK-' + Date.now(),
            agent_id: agentId,
            agent_name: agent.name,
            title: task.title,
            description: task.description,
            priority: task.priority || 'medium',
            status: 'assigned',
            assigned_at: new Date().toISOString(),
            due: task.due || new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),
            progress: 0
        };
        
        taskQueue.push(taskAssignment);
        agent.tasks_pending++;
        
        console.log('âœ… Task assigned to', agent.name, ':', task.title);
        addNotification('success', `ðŸ“‹ Task assigned to ${agent.name}`);
        
        return taskAssignment;
    }
    
    // Find best agent for a task based on capabilities
    function findBestAgent(taskType, requirements = []) {
        if (!agentData || !agentData.agents) return null;
        
        const availableAgents = agentData.agents.filter(a => 
            (a.current_status === 'available' || a.current_status === 'active') &&
            a.availability !== 'low'
        );
        
        if (availableAgents.length === 0) {
            console.warn('âš ï¸ No available agents');
            return null;
        }
        
        // Score agents based on capability match and current load
        const scoredAgents = availableAgents.map(agent => {
            let score = 0;
            
            // Capability match
            if (agent.capabilities && agent.capabilities.includes(taskType)) {
                score += 50;
            }
            
            // Success rate
            score += (agent.success_rate || 90) * 0.3;
            
            // Availability (prefer less busy agents)
            const availabilityScore = {
                'high': 20,
                'medium': 10,
                'low': 0
            }[agent.availability] || 0;
            score += availabilityScore;
            
            // Penalize high pending task count
            score -= (agent.tasks_pending || 0) * 5;
            
            return { agent, score };
        });
        
        // Sort by score descending
        scoredAgents.sort((a, b) => b.score - a.score);
        
        console.log('ðŸŽ¯ Best agent for', taskType, ':', scoredAgents[0]?.agent?.name);
        return scoredAgents[0]?.agent || availableAgents[0];
    }
    
    // Auto-assign task to best available agent
    function autoAssignTask(task) {
        const bestAgent = findBestAgent(task.task_type, task.requirements);
        if (bestAgent) {
            return assignTask(bestAgent.id, task);
        }
        console.error('âŒ Could not auto-assign task:', task.title);
        return null;
    }
    
    // Agent Communication Hub
    const agentMessages = [];
    
    function sendAgentMessage(fromAgentId, toAgentId, message, priority = 'normal') {
        const msg = {
            id: 'MSG-' + Date.now(),
            from: fromAgentId,
            to: toAgentId,
            content: message,
            priority: priority,
            timestamp: new Date().toISOString(),
            read: false
        };
        
        agentMessages.push(msg);
        
        if (priority === 'high') {
            addNotification('alert', `ðŸ“¨ High priority message from ${fromAgentId}`);
        }
        
        console.log('ðŸ“¨ Message sent:', fromAgentId, 'â†’', toAgentId);
        return msg;
    }
    
    // Broadcast message to all agents
    function broadcastToAgents(fromAgentId, message, excludeOffline = true) {
        if (!agentData || !agentData.agents) return;
        
        agentData.agents.forEach(agent => {
            if (agent.id !== fromAgentId) {
                if (!excludeOffline || agent.current_status !== 'offline') {
                    sendAgentMessage(fromAgentId, agent.id, message);
                }
            }
        });
        
        console.log('ðŸ“¢ Broadcast sent from', fromAgentId, 'to all agents');
    }
    
    // Performance Tracking
    function updateAgentMetrics(agentId, metricUpdate) {
        const agent = agentData?.agents?.find(a => a.id === agentId);
        if (!agent) return;
        
        if (metricUpdate.tasks_completed !== undefined) {
            agent.tasks_completed = metricUpdate.tasks_completed;
        }
        if (metricUpdate.tasks_pending !== undefined) {
            agent.tasks_pending = metricUpdate.tasks_pending;
        }
        if (metricUpdate.success_rate !== undefined) {
            agent.success_rate = metricUpdate.success_rate;
        }
        if (metricUpdate.current_status !== undefined) {
            agent.current_status = metricUpdate.current_status;
        }
        
        // Update last active timestamp
        agent.last_active = new Date().toISOString();
        
        console.log('ðŸ“ˆ Metrics updated for', agent.name);
        updateAgentDashboard();
    }
    
    // Generate coordination report
    function generateCoordinationReport() {
        if (!agentData) return null;
        
        const report = {
            timestamp: new Date().toISOString(),
            summary: {
                total_agents: agentData.agents.length,
                active_agents: agentData.agents.filter(a => a.current_status === 'active').length,
                available_agents: agentData.agents.filter(a => a.current_status === 'available').length,
                busy_agents: agentData.agents.filter(a => a.current_status === 'busy').length,
                offline_agents: agentData.agents.filter(a => a.current_status === 'offline').length,
                avg_success_rate: Math.round(agentData.agents.reduce((sum, a) => sum + (a.success_rate || 0), 0) / agentData.agents.length),
                total_tasks_completed: agentData.agents.reduce((sum, a) => sum + (a.tasks_completed || 0), 0),
                total_tasks_pending: agentData.agents.reduce((sum, a) => sum + (a.tasks_pending || 0), 0)
            },
            agents: agentData.agents.map(a => ({
                id: a.id,
                name: a.name,
                status: a.current_status,
                availability: a.availability,
                tasks_completed: a.tasks_completed,
                tasks_pending: a.tasks_pending,
                success_rate: a.success_rate
            })),
            task_queue: taskQueue,
            recent_messages: agentMessages.slice(-10)
        };
        
        console.log('ðŸ“Š Coordination report generated');
        return report;
    }
    
    // Export report as JSON
    function exportAgentReport() {
        const report = generateCoordinationReport();
        if (!report) {
            addNotification('error', 'âŒ Failed to generate report');
            return;
        }
        
        const dataStr = JSON.stringify(report, null, 2);
        const dataBlob = new Blob([dataStr], { type: 'application/json' });
        const url = URL.createObjectURL(dataBlob);
        
        const link = document.createElement('a');
        link.href = url;
        link.download = `agent-coordination-report-${new Date().toISOString().split('T')[0]}.json`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
        
        addNotification('success', 'ðŸ“Š Agent report exported');
    }
    
    // Refresh agent data
    function refreshAgentData() {
        addNotification('info', 'ðŸ”„ Refreshing agent data...');
        loadAgentRegistry().then(() => {
            addNotification('success', 'âœ… Agent data refreshed');
        }).catch(error => {
            addNotification('error', 'âŒ Failed to refresh agent data');
        });
    }
    
    // Render agent task cards in the task view
    function renderAgentTasks(filter = 'all') {
        const container = document.getElementById('agentTaskGrid');
        if (!container) return;
        
        // Sample tasks for demonstration
        const tasks = [
            { id: 1, title: 'Create LinkedIn post for Feb 4', agent: 'LinkedIn Execution Agent', priority: 'high', progress: 60, status: 'in_progress' },
            { id: 2, title: 'Fix dashboard color scheme', agent: 'Dashboard Enhancement Agent', priority: 'medium', progress: 90, status: 'in_progress' },
            { id: 3, title: 'Update agent coordination system', agent: 'Agent Coordination System', priority: 'critical', progress: 35, status: 'in_progress' },
            { id: 4, title: 'Design new landing page', agent: 'Branding & Design Agent', priority: 'medium', progress: 20, status: 'pending' },
            { id: 5, title: 'Write blog post about VR in education', agent: 'AI Content Generation Agent', priority: 'low', progress: 0, status: 'pending' },
            { id: 6, title: 'Analyze Q1 performance metrics', agent: 'Analytics & Reporting Agent', priority: 'high', progress: 45, status: 'in_progress' }
        ];
        
        const filteredTasks = filter === 'all' ? tasks : tasks.filter(t => t.priority === filter);
        
        container.innerHTML = filteredTasks.map(task => `
            <div class="agent-task-card ${task.priority}">
                <div class="agent-task-header">
                    <div class="agent-task-title">${task.title}</div>
                    <div class="agent-task-priority ${task.priority}">${task.priority}</div>
                </div>
                <div class="agent-task-meta">
                    <span><i class="fas fa-robot"></i> ${task.agent}</span>
                    <span><i class="fas fa-clock"></i> ${task.status}</span>
                </div>
                <div class="agent-task-progress">
                    <div class="progress-label">Progress: ${task.progress}%</div>
                    <div class="progress-bar-small">
                        <div class="progress-fill-small" style="width: ${task.progress}%; background-color: var(--${task.priority === 'critical' ? 'danger' : task.priority === 'high' ? 'success' : 'primary'});"></div>
                    </div>
                </div>
            </div>
        `).join('');
    }
    
    // Filter tasks by priority
    function filterTasksByPriority(priority) {
        document.querySelectorAll('.agent-task-filter').forEach(f => f.classList.remove('active'));
        event.target.classList.add('active');
        renderAgentTasks(priority);
    }
    
    // Render priority queue columns
    function renderPriorityQueue() {
        const priorities = ['critical', 'high', 'medium', 'low'];
        const sampleTasks = {
            critical: [
                { id: 1, title: 'Fix production bug', agent: 'Developer Agent' }
            ],
            high: [
                { id: 2, title: 'Create LinkedIn post', agent: 'LinkedIn Agent' },
                { id: 3, title: 'Update dashboard', agent: 'Dashboard Agent' }
            ],
            medium: [
                { id: 4, title: 'Design landing page', agent: 'Design Agent' }
            ],
            low: [
                { id: 5, title: 'Research competitors', agent: 'Research Agent' }
            ]
        };
        
        priorities.forEach(priority => {
            const container = document.getElementById(`${priority}Tasks`);
            const countEl = document.getElementById(`${priority}Count`);
            if (container) {
                const tasks = sampleTasks[priority] || [];
                countEl.textContent = tasks.length;
                container.innerHTML = tasks.map(task => `
                    <div class="priority-task-item" draggable="true">
                        <div style="font-weight: 600; margin-bottom: 5px;">${task.title}</div>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <i class="fas fa-robot"></i> ${task.agent}
                        </div>
                    </div>
                `).join('');
            }
        });
    }
    
    // Refresh priority queue
    function refreshPriorityQueue() {
        renderPriorityQueue();
        addNotification('success', 'ðŸ”„ Priority queue refreshed');
    }
    
    // Add new priority task
    function addPriorityTask() {
        const title = prompt('Enter task title:');
        if (!title) return;
        
        const priority = prompt('Priority (critical/high/medium/low):', 'medium');
        const agent = prompt('Assign to agent:', 'Main Agent');
        
        addNotification('success', `âœ… Task "${title}" added with ${priority} priority`);
        renderPriorityQueue();
    }
    
    // Render workload chart
    function renderWorkloadChart() {
        const container = document.getElementById('workloadChartContainer');
        if (!container) return;
        
        if (!agentData || !agentData.agents) return;
        
        const workloadData = agentData.agents.map(agent => {
            const workload = Math.min(100, (agent.tasks_pending || 0) * 20 + (agent.tasks_completed || 0) * 0.5);
            let level = 'low';
            if (workload > 80) level = 'critical';
            else if (workload > 60) level = 'high';
            else if (workload > 40) level = 'medium';
            
            return {
                name: agent.name,
                workload: Math.round(workload),
                level: level,
                tasks: agent.tasks_pending || 0
            };
        });
        
        container.innerHTML = workloadData.map(agent => `
            <div class="agent-workload-item">
                <div class="agent-workload-name">${agent.name}</div>
                <div class="agent-workload-bar">
                    <div class="agent-workload-fill ${agent.level}" style="width: ${agent.workload}%"></div>
                </div>
                <div class="agent-workload-value">${agent.workload}%</div>
            </div>
        `).join('');
    }
    
    // Analyze workload
    function analyzeWorkload() {
        renderWorkloadChart();
        addNotification('info', 'ðŸ” Workload analysis complete');
    }
    
    // Rebalance workload
    function rebalanceWorkload() {
        addNotification('info', 'âš–ï¸ Rebalancing workload...');
        setTimeout(() => {
            addNotification('success', 'âœ… Workload rebalanced');
            renderWorkloadChart();
        }, 1500);
    }
    
    // Redistribute tasks
    function redistributeTasks() {
        addNotification('info', 'ðŸ”„ Redistributing tasks...');
        setTimeout(() => {
            addNotification('success', 'âœ… Tasks redistributed');
        }, 1500);
    }
    
    // Find bottlenecks
    function identifyBottlenecks() {
        const busyAgents = agentData?.agents?.filter(a => (a.tasks_pending || 0) > 3) || [];
        if (busyAgents.length > 0) {
            addNotification('warning', `âš ï¸ Found ${busyAgents.length} agents with high workload`);
        } else {
            addNotification('success', 'âœ… No bottlenecks detected');
        }
    }
    
    // Suggest reassignments
    function suggestReassignments() {
        addNotification('info', 'ðŸ’¡ Analyzing optimal task distribution...');
        setTimeout(() => {
            addNotification('success', 'âœ… Suggestions ready (see console)');
            console.log('Task reassignment suggestions:', [
                { task: 'LinkedIn Post', from: 'LinkedIn Agent', to: 'AI Content Agent', reason: 'Better availability' },
                { task: 'Dashboard Fix', from: 'Dashboard Agent', to: 'Developer Agent', reason: 'Technical expertise' }
            ]);
        }, 1500);
    }
    
    // View capacity planning
    function viewCapacityPlanning() {
        addNotification('info', 'ðŸ“Š Capacity planning report generated');
        console.log('Capacity Planning:', {
            totalCapacity: '140 hours/week',
            utilizedCapacity: '98 hours/week (70%)',
            availableCapacity: '42 hours/week',
            recommendations: ['Hire additional designer', 'Optimize meeting schedules']
        });
    }
    
    // Agent chat functions
    function sendAgentChatMessage() {
        const input = document.getElementById('agentChatInput');
        const messagesContainer = document.getElementById('agentChatMessages');
        const agentSelector = document.getElementById('chatAgentSelector');
        
        if (!input || !messagesContainer || !input.value.trim()) return;
        
        const message = input.value.trim();
        const target = agentSelector ? agentSelector.value : 'broadcast';
        
        // Add outgoing message
        const msgDiv = document.createElement('div');
        msgDiv.className = 'agent-chat-message outgoing';
        msgDiv.innerHTML = `
            <div class="agent-chat-message-header">
                <span>You</span>
                <span>${new Date().toLocaleTimeString()}</span>
            </div>
            <div>${message}</div>
        `;
        messagesContainer.appendChild(msgDiv);
        
        input.value = '';
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
        
        // Simulate response
        if (target !== 'broadcast') {
            setTimeout(() => {
                const responseDiv = document.createElement('div');
                responseDiv.className = 'agent-chat-message incoming';
                responseDiv.innerHTML = `
                    <div class="agent-chat-message-header">
                        <span>${target.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase())}</span>
                        <span>${new Date().toLocaleTimeString()}</span>
                    </div>
                    <div>Received! Working on it...</div>
                `;
                messagesContainer.appendChild(responseDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 1000);
        }
    }
    
    function handleChatKeypress(event) {
        if (event.key === 'Enter') {
            sendAgentChatMessage();
        }
    }
    
    function clearChatHistory() {
        const messagesContainer = document.getElementById('agentChatMessages');
        if (messagesContainer) {
            messagesContainer.innerHTML = '<div style="color: var(--text-secondary); text-align: center; padding: 20px;">Chat history cleared</div>';
        }
    }
    
    // Auto-assign all tasks
    function autoAssignAllTasks() {
        addNotification('info', 'ðŸ¤– Auto-assigning all pending tasks...');
        setTimeout(() => {
            addNotification('success', 'âœ… 6 tasks auto-assigned to optimal agents');
            renderAgentTasks();
        }, 1500);
    }
    
    // Filter agent tasks
    function filterAgentTasks() {
        const selector = document.getElementById('agentTaskFilter');
        if (selector) {
            renderAgentTasks(selector.value);
        }
    }
    
    // Initialize Chart.js performance charts
    function initPerformanceCharts() {
        // Completion Rate Chart
        const completionCtx = document.getElementById('completionRateChart');
        if (completionCtx) {
            new Chart(completionCtx, {
                type: 'bar',
                data: {
                    labels: ['LinkedIn', 'Design', 'Dev', 'Content', 'Analytics'],
                    datasets: [{
                        label: 'Tasks Completed',
                        data: [23, 19, 31, 28, 15],
                        backgroundColor: '#ff6b00'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } }
                }
            });
        }
        
        // Response Time Chart
        const responseCtx = document.getElementById('responseTimeChart');
        if (responseCtx) {
            new Chart(responseCtx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'],
                    datasets: [{
                        label: 'Avg Response Time (min)',
                        data: [15, 12, 18, 10, 14],
                        borderColor: '#132e5e',
                        backgroundColor: 'rgba(19, 46, 94, 0.1)',
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }
        
        // Success Rate Trend Chart
        const successCtx = document.getElementById('successRateTrendChart');
        if (successCtx) {
            new Chart(successCtx, {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    datasets: [{
                        label: 'Success Rate %',
                        data: [88, 90, 91, 92.3],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { min: 80, max: 100 }
                    }
                }
            });
        }
        
        // Workload Distribution Chart
        const workloadCtx = document.getElementById('workloadDistributionChart');
        if (workloadCtx) {
            new Chart(workloadCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Active', 'Available', 'Busy', 'Offline'],
                    datasets: [{
                        data: [8, 3, 5, 1],
                        backgroundColor: ['#10b981', '#3b82f6', '#f59e0b', '#6b7280']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }
        
        // NEW ANALYTICS CHARTS
        // Revenue Trend Chart
        const revenueCtx = document.getElementById('revenueTrendChart');
        if (revenueCtx) {
            new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Pipeline ($K)',
                        data: [15, 45, 85, 140, 210, 300],
                        borderColor: '#22c55e',
                        backgroundColor: 'rgba(34, 197, 94, 0.1)',
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'Closed ($K)',
                        data: [5, 12, 28, 55, 95, 150],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }
        
        // Agent Performance Chart
        const agentPerfCtx = document.getElementById('agentPerformanceChart');
        if (agentPerfCtx) {
            new Chart(agentPerfCtx, {
                type: 'radar',
                data: {
                    labels: ['Speed', 'Quality', 'Communication', 'Tasks', 'Success', 'Availability'],
                    datasets: [{
                        label: 'SDR Agent',
                        data: [85, 92, 88, 75, 90, 95],
                        borderColor: '#22c55e',
                        backgroundColor: 'rgba(34, 197, 94, 0.2)'
                    }, {
                        label: 'CRM Agent',
                        data: [90, 88, 85, 90, 92, 88],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.2)'
                    }, {
                        label: 'Financial Agent',
                        data: [88, 95, 90, 85, 94, 92],
                        borderColor: '#f59e0b',
                        backgroundColor: 'rgba(245, 158, 11, 0.2)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: { min: 0, max: 100 }
                    }
                }
            });
        }
        
        // Task Distribution Doughnut
        const taskDistCtx = document.getElementById('taskDistributionChart');
        if (taskDistCtx) {
            new Chart(taskDistCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Sales', 'Marketing', 'Development', 'Finance', 'Operations'],
                    datasets: [{
                        data: [35, 25, 20, 12, 8],
                        backgroundColor: [
                            '#22c55e',
                            '#3b82f6',
                            '#f59e0b',
                            '#8b5cf6',
                            '#ec4899'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    },
                    cutout: '65%'
                }
            });
        }
        
        // Weekly Activity Chart
        const weeklyCtx = document.getElementById('weeklyActivityChart');
        if (weeklyCtx) {
            new Chart(weeklyCtx, {
                type: 'bar',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Tasks Completed',
                        data: [12, 19, 15, 22, 18, 8, 5],
                        backgroundColor: '#3b82f6',
                        borderRadius: 6
                    }, {
                        label: 'New Leads',
                        data: [5, 8, 6, 10, 7, 3, 2],
                        backgroundColor: '#22c55e',
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    },
                    scales: {
                        y: { beginAtZero: true },
                        x: { grid: { display: false } }
                    }
                }
            });
        }
    }
    
    // Refresh analytics data
    function refreshAnalytics() {
        addNotification('info', 'ðŸ“Š Refreshing analytics data...');
        setTimeout(() => {
            initPerformanceCharts();
            addNotification('success', 'âœ… Analytics updated');
        }, 1000);
    }
    
    // Export analytics data
    function exportAnalytics() {
        const data = {
            timestamp: new Date().toISOString(),
            revenue: { pipeline: 45000, closed: 12000, target: 300000 },
            tasks: { completed: 847, pending: 28, total: 875 },
            agents: { active: 11, available: 6, total: 20 },
            performance: { successRate: 94, avgResponseTime: 2.4 }
        };
        
        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `analytics-${new Date().toISOString().split('T')[0]}.json`;
        a.click();
        URL.revokeObjectURL(url);
        
        addNotification('success', 'ðŸ“Š Analytics exported');
    }
    
    function updatePerformanceCharts() {
        // Re-initialize with new time range data
        initPerformanceCharts();
    }
    
    function exportChartData() {
        addNotification('success', 'ðŸ“Š Chart data exported to console');
        console.log('Performance Chart Data:', {
            completionRates: { linkedin: 23, design: 19, dev: 31, content: 28, analytics: 15 },
            responseTimes: [15, 12, 18, 10, 14],
            successRates: [88, 90, 91, 92.3],
            workloadDistribution: { active: 8, available: 3, busy: 5, offline: 1 }
        });
    }
    
    // Live Updates System
    const liveUpdates = [
        { id: 1, type: 'success', message: 'Dashboard v16 deployed - cache fixes applied', time: 'Just now', icon: 'ðŸš€' },
        { id: 2, type: 'info', message: 'JavaScript errors fixed - renderLiveUpdates working', time: '2 minutes ago', icon: 'ðŸ›' },
        { id: 3, type: 'success', message: 'Business impact testing completed', time: '10 minutes ago', icon: 'âœ…' },
        { id: 4, type: 'success', message: '3 New Agents Activated: SDR, CRM Sales, Financial (CPA)', time: '20 minutes ago', icon: 'ðŸ¤–' },
        { id: 5, type: 'info', message: 'Authentication system active - 2 admins configured', time: '30 minutes ago', icon: 'ðŸ”' },
        { id: 6, type: 'success', message: '8 new analytics charts added to dashboard', time: '1 hour ago', icon: 'ðŸ“Š' },
        { id: 7, type: 'info', message: 'Tax documentation library created (CPA resources)', time: '2 hours ago', icon: 'ðŸ“š' },
        { id: 8, type: 'success', message: 'Q1 Marketing & Sales Plan completed ($300K target)', time: '3 hours ago', icon: 'ðŸŽ¯' },
        { id: 9, type: 'info', message: 'Week 2 LinkedIn posts ready (Feb 10, 12, 14)', time: '4 hours ago', icon: 'ðŸ“…' },
        { id: 10, type: 'warning', message: 'Purple colors removed from all LinkedIn specs', time: '5 hours ago', icon: 'ðŸŽ¨' }
    ];
    
    function toggleLiveUpdates() {
        const container = document.getElementById('liveUpdatesContainer');
        const toggle = document.getElementById('liveUpdatesToggle');
        
        if (!container) return;
        
        if (container.style.maxHeight === '0px') {
            container.style.maxHeight = '500px';
            if (toggle) toggle.style.transform = 'rotate(0deg)';
        } else {
            container.style.maxHeight = '0px';
            if (toggle) toggle.style.transform = 'rotate(-90deg)';
        }
    }
    
    function renderLiveUpdates() {
        const feed = document.getElementById('activityFeed');
        if (!feed) return;
        
        if (liveUpdates.length === 0) {
            feed.innerHTML = `
                <li style="padding: 20px; text-align: center; color: var(--text-secondary);">
                    <i class="fas fa-inbox" style="font-size: 2rem; margin-bottom: 10px; display: block; opacity: 0.5;"></i>
                    No updates yet
                </li>
            `;
            return;
        }
        
        const borderColors = {
            success: '#22c55e',
            info: '#3b82f6',
            warning: '#f59e0b',
            error: '#ef4444'
        };
        
        feed.innerHTML = liveUpdates.map(update => `
            <li style="padding: 12px; margin-bottom: 8px; background: var(--dark-card); border-radius: 8px; border-left: 4px solid ${borderColors[update.type] || '#3b82f6'};">
                <div style="display: flex; align-items: flex-start; gap: 12px;">
                    <span style="font-size: 1.3rem; flex-shrink: 0;">${update.icon}</span>
                    <div style="flex: 1; min-width: 0;">
                        <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 4px; line-height: 1.4;">${update.message}</div>
                        <div style="font-size: 0.8rem; color: #64748b; display: flex; align-items: center; gap: 6px;">
                            <i class="far fa-clock" style="font-size: 0.75rem;"></i>
                            ${update.time}
                        </div>
                    </div>
                </div>
            </li>
        `).join('');
    }
    
    function addLiveUpdate(type, message, icon = 'ðŸ“¢') {
        const newUpdate = {
            id: Date.now(),
            type: type,
            message: message,
            time: 'Just now',
            icon: icon
        };
        
        liveUpdates.unshift(newUpdate);
        if (liveUpdates.length > 20) liveUpdates.pop();
        
        liveUpdates.forEach((update, index) => {
            if (index === 0) update.time = 'Just now';
            else if (index === 1) update.time = '1 minute ago';
            else if (index < 5) update.time = `${index} minutes ago`;
            else if (index < 15) update.time = `${Math.floor(index / 5)} hours ago`;
            else update.time = 'Today';
        });
        
        renderLiveUpdates();
    }
    
    // Initialize agent coordination system
    document.addEventListener('DOMContentLoaded', function() {
        console.log('ðŸš€ Initializing Agent Coordination System v2.0...');
        
        // Load agent registry
        loadAgentRegistry().then(() => {
            // Render UI components
            renderAgentTasks();
            renderPriorityQueue();
            renderWorkloadChart();
            initPerformanceCharts();
        });
        
        // Set up periodic refresh (every 30 seconds)
        setInterval(() => {
            updateAgentDashboard();
            renderWorkloadChart();
        }, 30000);
        
        console.log('âœ… Agent Coordination System initialized');
        
        // Render live updates
        renderLiveUpdates();
    });
    </script>
</body>

    // Logout function
    function logout() {
        localStorage.removeItem('ascent_session');
        window.location.href = 'login.html';
    }
    
    // Session timeout check
    setInterval(() => {
        const session = localStorage.getItem('ascent_session');
        if (!session) {
            window.location.href = 'login.html';
            return;
        }
        try {
            const sessionData = JSON.parse(session);
            if (sessionData.expires < Date.now()) {
                logout();
            }
        } catch (e) {
            logout();
        }
    }, 60000);
    
    // Display current user info on load
    document.addEventListener('DOMContentLoaded', function() {
        if (window.currentUser) {
            const userNameEl = document.getElementById('userName');
            const userRoleEl = document.getElementById('userRole');
            if (userNameEl) userNameEl.textContent = window.currentUser.name || 'Admin';
            if (userRoleEl) userRoleEl.textContent = window.currentUser.role || 'Admin';
        }
    });
    
    // LinkedIn countdown timer
    setInterval(() => {
        const countdownElement = document.getElementById('linkedinCountdown');
        if (countdownElement) {
            const text = countdownElement.textContent;
            const match = text.match(/(\d+)h\s*(\d+)m/);
            if (match) {
                let hours = parseInt(match[1]);
                let minutes = parseInt(match[2]);
                minutes--;
                if (minutes < 0) {
                    minutes = 59;
                    hours--;
                }
                if (hours >= 0) {
                    countdownElement.textContent = `${hours}h ${minutes}m`;
                }
            }
        }
    }, 60000);
    </script>
</body>
</html>
